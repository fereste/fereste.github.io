{"version":3,"sources":["utils/utils.ts","utils/encryption.ts","api/credentials.ts","api/authApi.ts","api/Gasto.ts","api/sheetsApi.ts","components/SaveButton.tsx","context/AuthContext.tsx","pages/UnloggedPage.tsx","components/NumberFormatCustom.jsx","components/CategorySelect.tsx","pages/MainPage.tsx","pages/NotFoundPage.tsx","pages/StatsPage.tsx","components/MyAppBar.tsx","App.tsx","index.jsx"],"names":["isNullOrEmpty","value","undefined","length","b64ToUtf8","str","decodeURIComponent","escape","window","atob","clientId","apiKey","discoveryDocs","spreadsheetId","getUser","gapi","auth2","getAuthInstance","currentUser","get","getBasicProfile","getGivenName","gapiLoad","Promise","resolve","reject","load","signInCallback","client","init","scope","then","isSignedIn","listen","error","initClient","Gasto","description","category","amount","date","author","this","a","errors","push","verb","fields","join","slice","toLocaleUpperCase","concat","Error","Date","toLocaleString","year","month","day","user","name","sheets","spreadsheets","values","append","range","valueInputOption","resource","lastRowResponse","rangeValues","result","lastRow","firstRow","dataResponse","data","map","item","useStyles","makeStyles","theme","buttonContainer","display","justifyContent","wrapper","margin","spacing","position","success","backgroundColor","green","failure","red","progress","color","top","left","zIndex","iconWrapper","alignItems","buttonStates","SaveButton","onClick","promise","classes","useState","state","setState","useEffect","setTimeout","catch","className","Fab","aria-label","clsx","disabled","Fade","in","appear","style","transitionDelay","CircularProgress","size","AuthContext","React","createContext","displayName","AuthContextProvider","children","setIsSignedIn","setError","handleSignIn","useCallback","errorLogueo","signIn","handleSignOut","signOut","ex","location","href","JSON","stringify","useMemo","Provider","useAuthContext","context","useContext","root","textAlign","marginBottom","button","marginTop","errorMessage","palette","main","UnloggedPage","onSignedIn","auth","setErrorMessage","handleSignInClick","Typography","variant","Button","NumberFormatCustom","inputRef","onChange","props","controlledValue","setControlledValue","valueRef","useRef","handleValueChange","newValue","current","handleChange","event","target","getInputRef","onValueChange","thousandSeparator","decimalSeparator","decimalScale","isNumericString","allowNegative","prefix","categories","sort","CategorySelect","fullWidth","FormControl","InputLabel","id","Select","labelId","label","MenuItem","input","form","initialValues","fieldsReducer","previous","action","MainPage","useReducer","updateFields","setPromise","recentGastos","autocompleteOptions","setAutocompleteOptions","handleFieldChange","handleSaveClick","formHasErrors","Object","keys","forEach","fieldName","writePromise","writeGasto","getRecentGastos","gastos","filter","index","self","findIndex","x","reverse","Autocomplete","renderInput","params","TextField","getOptionLabel","gasto","options","clearOnBlur","InputProps","inputComponent","component","NotFoundPage","history","useHistory","StatsPage","title","flexGrow","MyAppBar","handleStatsClick","handleSignOutClick","AppBar","Toolbar","IconButton","createMuiTheme","type","typography","MuiButton","MuiFormControl","MuiSelect","MuiTextField","App","CssBaseline","basename","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2727e8ed.chunk.js","sourcesContent":["/* eslint-disable import/prefer-default-export */\r\nexport function isNullOrEmpty(value: string): boolean {\r\n    return value === null || value === undefined || value.length === 0;\r\n}\r\n","export function utf8ToB64(str: string) {\r\n    return window.btoa(unescape(encodeURIComponent(str)));\r\n}\r\n\r\nexport function b64ToUtf8(str: string) {\r\n    return decodeURIComponent(escape(window.atob(str)));\r\n}\r\n","import { b64ToUtf8 } from '../utils/encryption';\r\n\r\nconst encriptedClientId = 'OTE5NDY5MjYwODgzLXNnMmduOHZtNHBmOWRudThkYm9tZDQzbzNiZzZrczhjLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29t';\r\nconst encriptedApiKey = 'QUl6YVN5Q2ktOV9jb2tpMHdOVXlDcHd6YlFOUk8xTm5wdFdkNHpZ';\r\nconst encriptedSpreadsheetId = 'MUlQX3pyTDgxRWoyVENMRDVxSVlXZFA4ZkZrM3hZWXZKXy1rb2daV0FhOUU=';\r\n\r\nexport const clientId = b64ToUtf8(encriptedClientId);\r\nexport const apiKey = b64ToUtf8(encriptedApiKey);\r\nexport const discoveryDocs = ['https://sheets.googleapis.com/$discovery/rest?version=v4'];\r\nexport const scopes = 'https://www.googleapis.com/auth/spreadsheets';\r\nexport const spreadsheetId = b64ToUtf8(encriptedSpreadsheetId);\r\n","import { apiKey, clientId, discoveryDocs, scopes } from './credentials';\r\n\r\ntype PromiseFunction = (value?: unknown) => void;\r\ntype SignInCallback = (value: boolean) => void;\r\n\r\n/**\r\n *  Initializes the API client library and sets up sign-in state listeners.\r\n */\r\nexport function initClient(resolve: PromiseFunction, reject: PromiseFunction) {\r\n    return (signInCallback: SignInCallback) => {\r\n        window.gapi.client.init({\r\n            apiKey: apiKey,\r\n            clientId: clientId,\r\n            discoveryDocs: discoveryDocs,\r\n            scope: scopes,\r\n        }).then(() => {\r\n            // Listen for sign-in state changes.\r\n            window.gapi.auth2.getAuthInstance().isSignedIn.listen(signInCallback);\r\n\r\n            // Handle the initial sign-in state.\r\n            if (signInCallback) {\r\n                signInCallback(window.gapi.auth2.getAuthInstance().isSignedIn.get());\r\n            }\r\n\r\n            resolve();\r\n        }, (error: Record<string, unknown>) => {\r\n            reject(error);\r\n        });\r\n    };\r\n}\r\n\r\nexport function isSignedIn(): boolean {\r\n    return window.gapi.auth2.getAuthInstance().isSignedIn.get();\r\n}\r\n\r\nexport function signIn() {\r\n    return window.gapi.auth2.getAuthInstance().signIn();\r\n}\r\n\r\nexport function signOut() {\r\n    return window.gapi.auth2.getAuthInstance().signOut();\r\n}\r\n\r\nexport function getUser() {\r\n    return window.gapi.auth2?.getAuthInstance()?.currentUser.get()?.getBasicProfile()?.getGivenName();\r\n}\r\n\r\n/**\r\n *  On load, called to load the auth2 library and API client library.\r\n */\r\nexport function gapiLoad() {\r\n    return new Promise((resolve, reject) => {\r\n        window.gapi.load('client:auth2', initClient(resolve, reject));\r\n    });\r\n}\r\n","class Gasto {\r\n    public readonly description: string;\r\n\r\n    public readonly category: string;\r\n\r\n    public readonly amount: number;\r\n\r\n    public readonly date: string;\r\n\r\n    public readonly author: string;\r\n\r\n    constructor(\r\n        description: string,\r\n        category: string,\r\n        amount: number,\r\n        date: string,\r\n        author: string,\r\n    ) {\r\n        this.description = description;\r\n        this.category = category;\r\n        this.amount = amount;\r\n        this.date = date;\r\n        this.author = author;\r\n    }\r\n}\r\n\r\nexport default Gasto;\r\n","import { isNullOrEmpty } from '../utils/utils';\r\nimport { getUser } from './authApi';\r\nimport { spreadsheetId } from './credentials';\r\nimport Gasto from './Gasto';\r\n\r\nexport async function getGastos() {\r\n    try {\r\n        const response = await window.gapi.client.sheets.spreadsheets.values.get({\r\n            spreadsheetId: spreadsheetId,\r\n            range: 'Gastos!A2:B',\r\n        });\r\n        const range = response.result;\r\n        let out = 'Apellido, Nombre:';\r\n        if (range.values && range.values.length > 0) {\r\n            for (let i = 0; i < range.values.length; i++) {\r\n                const row = range.values[i];\r\n                out += `${row[1]}, ${row[0]}`;\r\n            }\r\n        }\r\n        else {\r\n            out = 'No data found.';\r\n        }\r\n        return out;\r\n    }\r\n    catch {\r\n        throw new Error('Error haciendo spreadsheets.values.get');\r\n    }\r\n}\r\n\r\nexport async function writeGasto(description: string, category: string, amount: string) {\r\n    const errors = [];\r\n    if (isNullOrEmpty(description)) {\r\n        errors.push('descripción');\r\n    }\r\n    if (isNullOrEmpty(category)) {\r\n        errors.push('categoría');\r\n    }\r\n    if (isNullOrEmpty(amount)) {\r\n        errors.push('cantidad');\r\n    }\r\n\r\n    if (errors.length > 0) {\r\n        const verb = errors.length === 1 ? 'tiene' : 'tienen';\r\n        let fields = `${errors.join(', ')}`;\r\n        fields = fields.slice(0, 1).toLocaleUpperCase().concat(fields.slice(1));\r\n        throw new Error(`${fields} ${verb} error.`);\r\n    }\r\n\r\n    try {\r\n        const date = new Date().toLocaleString('es-AR', {\r\n            year: 'numeric',\r\n            month: '2-digit',\r\n            day: '2-digit',\r\n        });\r\n\r\n        const user = getUser();\r\n        let name = '';\r\n        if (user === 'Fernando') {\r\n            name = 'Fer';\r\n        }\r\n        else if (user === 'Mariela') {\r\n            name = 'Maru';\r\n        }\r\n        else {\r\n            name = user;\r\n        }\r\n\r\n        await window.gapi.client.sheets.spreadsheets.values.append({\r\n            spreadsheetId: '1IP_zrL81Ej2TCLD5qIYWdP8fFk3xYYvJ_-kogZWAa9E',\r\n            range: 'Gastos!A2:E',\r\n            valueInputOption: 'USER_ENTERED',\r\n            resource: {\r\n                values: [[description, category, amount, date, name]],\r\n            },\r\n        });\r\n    }\r\n    catch (error) {\r\n        throw new Error(error);\r\n    }\r\n}\r\n\r\nexport async function getRecentGastos(amount = 30): Promise<Gasto[]> {\r\n    let lastRowResponse;\r\n    try {\r\n        lastRowResponse = await window.gapi.client.sheets.spreadsheets.values.get({\r\n            spreadsheetId: spreadsheetId,\r\n            range: 'Gastos!lastRow',\r\n        });\r\n    }\r\n    catch {\r\n        throw new Error('Falló request: no se pudo obtener el número de la última fila con datos.');\r\n    }\r\n\r\n    const rangeValues = lastRowResponse.result.values;\r\n    if (!rangeValues) {\r\n        throw new Error('No se pudo obtener el número de la última fila con datos.');\r\n    }\r\n\r\n    const lastRow: number = rangeValues[0][0];\r\n    const firstRow = lastRow - amount + 1;\r\n    let dataResponse;\r\n\r\n    try {\r\n        dataResponse = await window.gapi.client.sheets.spreadsheets.values.get({\r\n            spreadsheetId: spreadsheetId,\r\n            range: `Gastos!A${firstRow}:E${lastRow}`,\r\n        });\r\n    }\r\n    catch {\r\n        throw new Error(`Falló request: no se pudieron obtener los últimso ${amount} datos.`);\r\n    }\r\n\r\n    const data = dataResponse.result.values;\r\n    if (!data) {\r\n        throw new Error(`No se pudieron obtener los últimso ${amount} datos.`);\r\n    }\r\n\r\n    return data.map((item) => new Gasto(item[0], item[1], item[2], item[3], item[4]));\r\n}\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { CircularProgress, Fab, Fade, makeStyles } from '@material-ui/core';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport ErrorIcon from '@material-ui/icons/Close';\r\nimport { green, red } from '@material-ui/core/colors';\r\nimport clsx from 'clsx';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    buttonContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: 'absolute',\r\n    },\r\n    success: {\r\n        backgroundColor: green[500],\r\n        '&:hover': {\r\n            backgroundColor: green[700],\r\n        },\r\n    },\r\n    failure: {\r\n        backgroundColor: red[500],\r\n        '&:hover': {\r\n            backgroundColor: red[700],\r\n        },\r\n    },\r\n    progress: {\r\n        color: green[500],\r\n        position: 'absolute',\r\n        top: -6,\r\n        left: -6,\r\n        zIndex: 1,\r\n    },\r\n    iconWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        '& *': {\r\n            position: 'absolute',\r\n        },\r\n    },\r\n}));\r\n\r\nconst buttonStates = {\r\n    idle: 0, loading: 1, success: 2, failure: 3,\r\n};\r\n\r\ninterface SaveButtonProps {\r\n    onClick(): void,\r\n    promise: Promise<unknown> | undefined,\r\n}\r\n\r\nconst SaveButton: FC<SaveButtonProps> = ({\r\n    onClick,\r\n    promise,\r\n}) => {\r\n    const classes = useStyles();\r\n    const [state, setState] = useState(buttonStates.idle);\r\n\r\n    useEffect(() => {\r\n        if (promise) {\r\n            setState(buttonStates.loading);\r\n            promise.then(() => {\r\n                setState(buttonStates.success);\r\n                setTimeout(() => {\r\n                    setState(buttonStates.idle);\r\n                }, 2000);\r\n            }).catch(() => {\r\n                setState(buttonStates.failure);\r\n                setTimeout(() => {\r\n                    setState(buttonStates.idle);\r\n                }, 2000);\r\n            });\r\n        }\r\n        else {\r\n            setState(buttonStates.idle);\r\n        }\r\n    }, [promise]);\r\n\r\n    return (\r\n        <div className={classes.buttonContainer}>\r\n            <div className={classes.wrapper}>\r\n                <Fab\r\n                    aria-label=\"Guardar\"\r\n                    className={clsx({\r\n                        [classes.success]: state === buttonStates.success,\r\n                        [classes.failure]: state === buttonStates.failure,\r\n                    })}\r\n                    color=\"primary\"\r\n                    onClick={onClick}\r\n                    disabled={state === buttonStates.loading}\r\n                >\r\n                    <div className={classes.iconWrapper}>\r\n                        <Fade\r\n                            in={state === buttonStates.idle || state === buttonStates.loading}\r\n                            appear={false}\r\n                        >\r\n                            <SaveIcon />\r\n                        </Fade>\r\n                        <Fade\r\n                            in={state === buttonStates.success}\r\n                            style={{\r\n                                transitionDelay: state === buttonStates.success ? '200ms' : '0ms',\r\n                            }}\r\n                        >\r\n                            <CheckIcon />\r\n                        </Fade>\r\n                        <Fade\r\n                            in={state === buttonStates.failure}\r\n                            style={{\r\n                                transitionDelay: state === buttonStates.failure ? '200ms' : '0ms',\r\n                            }}\r\n                        >\r\n                            <ErrorIcon />\r\n                        </Fade>\r\n                    </div>\r\n                </Fab>\r\n                {\r\n                    state === buttonStates.loading\r\n                    && <CircularProgress size={68} className={classes.progress} />\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SaveButton;\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { gapiLoad, isSignedIn as gapiIsSignedIn, signIn, signOut } from '../api/authApi';\r\n\r\ninterface AuthContextProps {\r\n    isSignedIn: boolean,\r\n    setIsSignedIn: React.Dispatch<boolean>,\r\n    error: string | undefined,\r\n    signIn(): Promise<unknown>,\r\n    signOut(): Promise<unknown>,\r\n}\r\n\r\nconst AuthContext = React.createContext<AuthContextProps | undefined>(undefined);\r\nAuthContext.displayName = 'AuthContext';\r\n\r\nexport const AuthContextProvider: React.FC = ({ children }) => {\r\n    const [isSignedIn, setIsSignedIn] = useState<boolean>(false);\r\n    const [error, setError] = useState<string | undefined>(undefined);\r\n\r\n    const handleSignIn = useCallback(() => {\r\n        const errorLogueo = 'Hubo un error con el logueo. Estos programadores son todos iguales. Preguntale a Fer si lo puede arreglar.';\r\n        return signIn().then(() => {\r\n            setIsSignedIn(true);\r\n        }, () => {\r\n            setError(errorLogueo);\r\n        }).catch(() => {\r\n            setError(errorLogueo);\r\n        });\r\n    }, []);\r\n\r\n    const handleSignOut = useCallback(() => {\r\n        return signOut().then(() => {\r\n            setIsSignedIn(false);\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        gapiLoad().then(() => {\r\n            setIsSignedIn(gapiIsSignedIn());\r\n        }).catch((ex) => {\r\n            if (ex.error === 'idpiframe_initialization_failed') {\r\n                setError(`Tu URL no está admitida por Google. URL: ${window.location.href}`);\r\n            }\r\n            else {\r\n                setError(JSON.stringify(ex));\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const value = useMemo(() => {\r\n        return {\r\n            isSignedIn: isSignedIn,\r\n            setIsSignedIn: setIsSignedIn,\r\n            error: error,\r\n            signIn: handleSignIn,\r\n            signOut: handleSignOut,\r\n        };\r\n    }, [error, handleSignIn, handleSignOut, isSignedIn]);\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport function useAuthContext(): AuthContextProps {\r\n    const context = React.useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuthContext tiene que estar dentro de un AuthContextProvider');\r\n    }\r\n    return context;\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { Button, makeStyles, Typography } from '@material-ui/core';\r\nimport { useAuthContext } from '../context/AuthContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        margin: theme.spacing(3),\r\n        textAlign: 'center',\r\n    },\r\n    spacing: {\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    button: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    errorMessage: {\r\n        color: theme.palette.error.main,\r\n    },\r\n}));\r\n\r\ninterface UnloggedPageProps {\r\n    onSignedIn?(): void,\r\n}\r\n\r\nconst UnloggedPage: React.VFC<UnloggedPageProps> = ({ onSignedIn }) => {\r\n    const classes = useStyles();\r\n    const auth = useAuthContext();\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    const handleSignInClick = useCallback(() => {\r\n        auth.signIn().then(() => {\r\n            if (onSignedIn) {\r\n                onSignedIn();\r\n            }\r\n        });\r\n    }, [auth, onSignedIn]);\r\n\r\n    useEffect(() => {\r\n        setErrorMessage(auth.error ?? '');\r\n    }, [auth.error]);\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Typography className={classes.spacing} variant=\"h4\">\r\n                Oops! :(\r\n            </Typography>\r\n            <Typography className={classes.spacing} variant=\"body1\">\r\n                Tenés que loguearte para poder usar la app\r\n            </Typography>\r\n            <Typography className={classes.errorMessage} variant=\"body1\">\r\n                {errorMessage}\r\n            </Typography>\r\n            <Button\r\n                className={classes.button}\r\n                color=\"primary\"\r\n                onClick={handleSignInClick}\r\n            >\r\n                Loguearme con Google\r\n            </Button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UnloggedPage;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport NumberFormat from 'react-number-format';\r\n\r\nconst NumberFormatCustom = ({\r\n    inputRef = undefined,\r\n    onChange = undefined,\r\n    value = undefined,\r\n    ...props\r\n}) => {\r\n    const [controlledValue, setControlledValue] = useState('');\r\n    const valueRef = useRef('');\r\n\r\n    const handleValueChange = useCallback((newValue) => {\r\n        setControlledValue(newValue.value);\r\n        valueRef.current = newValue.value;\r\n    }, []);\r\n\r\n    const handleChange = useCallback((event) => {\r\n        event.target.value = valueRef.current;\r\n        if (onChange) {\r\n            onChange(event);\r\n        }\r\n    }, [onChange]);\r\n\r\n    useEffect(() => {\r\n        setControlledValue(value ?? '');\r\n    }, [value]);\r\n\r\n    return (\r\n        <NumberFormat\r\n            {...props}\r\n            getInputRef={inputRef}\r\n            onValueChange={handleValueChange}\r\n            onChange={handleChange}\r\n            thousandSeparator=\".\"\r\n            decimalSeparator=\",\"\r\n            decimalScale={2}\r\n            isNumericString\r\n            allowNegative={false}\r\n            prefix=\"$ \"\r\n            value={controlledValue}\r\n        />\r\n    );\r\n};\r\n\r\nexport default NumberFormatCustom;\r\n","import React, { FC } from 'react';\r\nimport { FormControl, InputLabel, MenuItem, Select, SelectProps } from '@material-ui/core';\r\n\r\nconst categories = [\r\n    'Casa',\r\n    'Supermercado',\r\n    'Farmacia',\r\n    'Electrónica',\r\n    'Gustos',\r\n    'Auto',\r\n    'Streaming',\r\n    'Otros',\r\n    'Maru',\r\n].sort();\r\n\r\nconst CategorySelect: FC<SelectProps> = ({ fullWidth, ...props }) => {\r\n    return (\r\n        <FormControl fullWidth={fullWidth}>\r\n            <InputLabel id=\"category-select-label\">\r\n                Categoría\r\n            </InputLabel>\r\n            <Select\r\n                labelId=\"category-select-label\"\r\n                label=\"Categoría\"\r\n                {...props}\r\n            >\r\n                {categories.map((category) => (\r\n                    <MenuItem\r\n                        key={`itCat${category}`}\r\n                        value={category}\r\n                    >\r\n                        {category}\r\n                    </MenuItem>\r\n                ))}\r\n            </Select>\r\n        </FormControl>\r\n    );\r\n};\r\n\r\nexport default CategorySelect;\r\n","import React, { useCallback, useEffect, useReducer, useRef, useState } from 'react';\r\nimport { makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { getRecentGastos, writeGasto } from '../api/sheetsApi';\r\nimport SaveButton from '../components/SaveButton';\r\nimport UnloggedPage from './UnloggedPage';\r\nimport { isNullOrEmpty } from '../utils/utils';\r\nimport NumberFormatCustom from '../components/NumberFormatCustom';\r\nimport CategorySelect from '../components/CategorySelect';\r\nimport { useAuthContext } from '../context/AuthContext';\r\nimport Gasto from '../api/Gasto';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    input: {\r\n        margin: theme.spacing(3),\r\n    },\r\n    buttonContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    form: {\r\n        // display: 'flex',\r\n        // flexDirection: 'column',\r\n    },\r\n    error: {\r\n        color: theme.palette.error.main,\r\n        textAlign: 'center',\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n}));\r\n\r\ninterface FormField {\r\n    value: string,\r\n    error: boolean,\r\n}\r\n\r\ninterface Form {\r\n    [index: string]: FormField,\r\n    description: FormField,\r\n    category: FormField,\r\n    amount: FormField,\r\n}\r\n\r\ninterface FormAction {\r\n    action: 'reset' | 'update' | 'validate',\r\n    name?: string,\r\n    value?: string | boolean,\r\n}\r\n\r\nconst initialValues: Form = {\r\n    description: { value: '', error: false },\r\n    category: { value: '', error: false },\r\n    amount: { value: '', error: false },\r\n};\r\n\r\nfunction fieldsReducer(previous: Form, action: FormAction): Form {\r\n    if (action.action === 'reset') {\r\n        return initialValues;\r\n    }\r\n\r\n    if (action.name !== undefined) {\r\n        if (action.action === 'update' && typeof action.value === 'string') {\r\n            return {\r\n                ...previous,\r\n                [action.name]: {\r\n                    ...previous[action.name],\r\n                    value: action.value,\r\n                },\r\n            };\r\n        }\r\n\r\n        if (action.action === 'validate' && typeof action.value === 'boolean') {\r\n            return {\r\n                ...previous,\r\n                [action.name]: {\r\n                    ...previous[action.name],\r\n                    error: action.value,\r\n                },\r\n            };\r\n        }\r\n    }\r\n\r\n    return previous;\r\n}\r\n\r\nconst MainPage: React.VFC = () => {\r\n    const classes = useStyles();\r\n    const auth = useAuthContext();\r\n    const [fields, updateFields] = useReducer(fieldsReducer, initialValues);\r\n    const [promise, setPromise] = useState<Promise<unknown>>();\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const recentGastos = useRef<Gasto[]>([]);\r\n    const [autocompleteOptions, setAutocompleteOptions] = useState<Gasto[]>([]);\r\n\r\n    const handleFieldChange = useCallback(({ target: { name, value } }) => {\r\n        updateFields({ action: 'update', name: name, value: value });\r\n        updateFields({ action: 'validate', name: name, value: false });\r\n    }, [updateFields]);\r\n\r\n    const handleSaveClick = useCallback(() => {\r\n        let formHasErrors = false;\r\n        Object.keys(fields).forEach((fieldName: string) => {\r\n            const error = isNullOrEmpty(fields[fieldName].value);\r\n\r\n            if (error) {\r\n                formHasErrors = true;\r\n            }\r\n\r\n            updateFields({\r\n                action: 'validate',\r\n                name: fieldName,\r\n                value: error,\r\n            });\r\n        });\r\n\r\n        if (formHasErrors) {\r\n            setPromise(new Promise((resolve, reject) => {\r\n                reject();\r\n            }));\r\n        }\r\n        else {\r\n            const writePromise = writeGasto(\r\n                fields.description.value,\r\n                fields.category.value,\r\n                fields.amount.value,\r\n            );\r\n            writePromise.then(() => {\r\n                updateFields({ action: 'reset' });\r\n            }).catch(() => {\r\n                setErrorMessage('Hubo un problema guardando los datos.');\r\n            });\r\n            setPromise(writePromise);\r\n        }\r\n    }, [fields]);\r\n\r\n    const handleSignIn = useCallback(() => {\r\n        auth.setIsSignedIn(true);\r\n    }, [auth]);\r\n\r\n    useEffect(() => {\r\n        if (auth.isSignedIn) {\r\n            getRecentGastos()\r\n                .then((gastos) => {\r\n                    recentGastos.current = gastos;\r\n                    setAutocompleteOptions(gastos\r\n                        .filter((value, index, self) => {\r\n                            return self.findIndex((x) => x.description === value.description) === index;\r\n                        })\r\n                        .reverse());\r\n                });\r\n        }\r\n    }, [auth.isSignedIn]);\r\n\r\n    if (!auth.isSignedIn) {\r\n        return (<UnloggedPage onSignedIn={handleSignIn} />);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form className={classes.form}>\r\n                <div className={classes.input}>\r\n                    <Autocomplete\r\n                        renderInput={(params) => (\r\n                            <TextField\r\n                                {...params}\r\n                                label=\"Descripción\"\r\n                                name=\"description\"\r\n                                fullWidth\r\n                                value={fields.description.value}\r\n                                onChange={handleFieldChange}\r\n                                error={fields.description.error}\r\n                            />\r\n                        )}\r\n                        getOptionLabel={(gasto: unknown) => (gasto as Gasto)?.description}\r\n                        options={autocompleteOptions}\r\n                        clearOnBlur={false}\r\n                    />\r\n                </div>\r\n                <div className={classes.input}>\r\n                    <CategorySelect\r\n                        label=\"Categoría\"\r\n                        name=\"category\"\r\n                        fullWidth\r\n                        value={fields.category.value}\r\n                        onChange={handleFieldChange}\r\n                        error={fields.category.error}\r\n                    />\r\n                </div>\r\n                <div className={classes.input}>\r\n                    <TextField\r\n                        label=\"Cantidad\"\r\n                        name=\"amount\"\r\n                        fullWidth\r\n                        value={fields.amount.value}\r\n                        onChange={handleFieldChange}\r\n                        error={fields.amount.error}\r\n                        InputProps={{\r\n                            inputComponent: NumberFormatCustom,\r\n                        }}\r\n                    />\r\n                </div>\r\n            </form>\r\n            <Typography\r\n                className={classes.error}\r\n                component=\"div\"\r\n                variant=\"body2\"\r\n            >\r\n                {errorMessage}\r\n            </Typography>\r\n            <SaveButton\r\n                onClick={handleSaveClick}\r\n                promise={promise}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MainPage;\r\n","import React, { useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst NotFoundPage: React.VFC = () => {\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            history.push('/');\r\n        }, 3000);\r\n    }, [history]);\r\n\r\n    return (\r\n        <div>\r\n            404 - Página no encontrada\r\n            Redirigiendo al inicio...\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NotFoundPage;\r\n","import React from 'react';\r\n\r\nconst StatsPage: React.VFC = () => {\r\n    return (\r\n        <div>\r\n            Acá van a aparecer gráficos lindos.\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatsPage;\r\n","import React, { useCallback } from 'react';\r\nimport { AppBar, IconButton, makeStyles, Toolbar, Typography } from '@material-ui/core';\r\nimport AccountIcon from '@material-ui/icons/AccountCircle';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAuthContext } from '../context/AuthContext';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n}));\r\n\r\nconst MyAppBar: React.VFC = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const auth = useAuthContext();\r\n\r\n    const handleStatsClick = useCallback(() => {\r\n        history.push('/stats');\r\n    }, [history]);\r\n\r\n    const handleSignOutClick = useCallback(() => {\r\n        auth.signOut();\r\n    }, [auth]);\r\n\r\n    return (\r\n        <AppBar position=\"static\">\r\n            <Toolbar>\r\n                <Typography variant=\"h6\" className={classes.title}>\r\n                    Nuevo gasto\r\n                </Typography>\r\n                <IconButton\r\n                    aria-label=\"Estadísticas\"\r\n                    color=\"inherit\"\r\n                    onClick={handleStatsClick}\r\n                >\r\n                    <BarChartIcon />\r\n                </IconButton>\r\n                <IconButton\r\n                    aria-label=\"Usuario\"\r\n                    color=\"inherit\"\r\n                    onClick={handleSignOutClick}\r\n                >\r\n                    <AccountIcon />\r\n                </IconButton>\r\n            </Toolbar>\r\n        </AppBar>\r\n    );\r\n};\r\n\r\nexport default MyAppBar;\r\n","import React from 'react';\r\nimport { createMuiTheme, CssBaseline, MuiThemeProvider } from '@material-ui/core';\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport MainPage from './pages/MainPage';\r\nimport NotFoundPage from './pages/NotFoundPage';\r\nimport StatsPage from './pages/StatsPage';\r\nimport { AuthContextProvider } from './context/AuthContext';\r\nimport MyAppBar from './components/MyAppBar';\r\nimport UnloggedPage from './pages/UnloggedPage';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        type: 'light',\r\n        // primary: { main: lightGreen[300] },\r\n        // secondary: { main: indigo.A100 },\r\n        // background: { default: blueGrey[900] },\r\n    },\r\n    typography: {\r\n        // allVariants: { color: 'white' }\r\n    },\r\n    props: {\r\n        MuiButton: {\r\n            variant: 'contained',\r\n        },\r\n        MuiFormControl: {\r\n            variant: 'outlined',\r\n        },\r\n        MuiSelect: {\r\n            variant: 'outlined',\r\n        },\r\n        MuiTextField: {\r\n            variant: 'outlined',\r\n        },\r\n    },\r\n});\r\n\r\nconst App: React.VFC = () => {\r\n    return (\r\n        <div>\r\n            <MuiThemeProvider theme={theme}>\r\n                <CssBaseline />\r\n                <AuthContextProvider>\r\n                    <BrowserRouter basename=\"/gastos\">\r\n                        <MyAppBar />\r\n                        <Switch>\r\n                            <Route exact path=\"/\">\r\n                                <MainPage />\r\n                            </Route>\r\n                            <Route exact path=\"/unlogged\">\r\n                                <UnloggedPage />\r\n                            </Route>\r\n                            <Route exact path=\"/stats\">\r\n                                <StatsPage />\r\n                            </Route>\r\n                            <Route path=\"*\">\r\n                                <NotFoundPage />\r\n                            </Route>\r\n                        </Switch>\r\n                    </BrowserRouter>\r\n                </AuthContextProvider>\r\n            </MuiThemeProvider>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n    document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}