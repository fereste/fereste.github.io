(this.webpackJsonpgastos=this.webpackJsonpgastos||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),r=n.n(c),i=n(10),o=n.n(i),s=(n(97),n(85)),u=n(152),l=n(153),d=n(53),j=n(11),b=n(15),p=n(29),O=n(14),h=n(137),g=n(155),f=n(144),v=n(49),m=n.n(v),x=n(66);function C(e){return null===e||void 0===e||0===e.length}function w(e){return decodeURIComponent(escape(window.atob(e)))}var y=w("OTE5NDY5MjYwODgzLXNnMmduOHZtNHBmOWRudThkYm9tZDQzbzNiZzZrczhjLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29t"),k=w("QUl6YVN5Q2ktOV9jb2tpMHdOVXlDcHd6YlFOUk8xTm5wdFdkNHpZ"),I=["https://sheets.googleapis.com/$discovery/rest?version=v4"];w("MUlQX3pyTDgxRWoyVENMRDVxSVlXZFA4ZkZrM3hZWXZKXy1rb2daV0FhOUU=");function N(){var e,t,n,a;return null===(e=window.gapi.auth2)||void 0===e||null===(t=e.getAuthInstance())||void 0===t||null===(n=t.currentUser.get())||void 0===n||null===(a=n.getBasicProfile())||void 0===a?void 0:a.getGivenName()}function S(){return new Promise((function(e,t){window.gapi.load("client:auth2",function(e,t){return function(n){window.gapi.client.init({apiKey:k,clientId:y,discoveryDocs:I,scope:"https://www.googleapis.com/auth/spreadsheets"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen(n),n&&n(window.gapi.auth2.getAuthInstance().isSignedIn.get()),e()}),(function(e){t(e)}))}}(e,t))}))}function E(){return(E=Object(x.a)(m.a.mark((function e(t,n,a){var c,r,i,o,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],C(t)&&c.push("descripci\xf3n"),C(n)&&c.push("categor\xeda"),C(a)&&c.push("cantidad"),!(c.length>0)){e.next=9;break}throw r=1===c.length?"tiene":"tienen",i=(i="".concat(c.join(", "))).slice(0,1).toLocaleUpperCase().concat(i.slice(1)),new Error("".concat(i," ").concat(r," error."));case 9:return e.prev=9,o=(new Date).toLocaleString("es-AR",{year:"numeric",month:"2-digit",day:"2-digit"}),s=N(),u="",u="Fernando"===s?"Fer":"Mariela"===s?"Maru":s,e.next=16,window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:"1IP_zrL81Ej2TCLD5qIYWdP8fFk3xYYvJ_-kogZWAa9E",range:"Gastos!A2:E",valueInputOption:"USER_ENTERED",resource:{values:[[t,n,a,o,u]]}});case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(9),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[9,18]])})))).apply(this,arguments)}var M=n(140),A=n(142),R=n(143),D=n(79),T=n.n(D),W=n(80),Z=n.n(W),F=n(81),U=n.n(F),P=n(62),z=n(61),L=n(3),Y=Object(h.a)((function(e){return{buttonContainer:{display:"flex",justifyContent:"center"},wrapper:{margin:e.spacing(1),position:"absolute"},success:{backgroundColor:P.a[500],"&:hover":{backgroundColor:P.a[700]}},failure:{backgroundColor:z.a[500],"&:hover":{backgroundColor:z.a[700]}},progress:{color:P.a[500],position:"absolute",top:-6,left:-6,zIndex:1},iconWrapper:{display:"flex",alignItems:"center",justifyContent:"center","& *":{position:"absolute"}}}})),H=0,V=1,G=2,X=3,B=function(e){var t,n=e.onClick,r=e.promise,i=Y(),o=Object(c.useState)(H),s=Object(b.a)(o,2),u=s[0],l=s[1];return Object(c.useEffect)((function(){r?(l(V),r.then((function(){l(G),setTimeout((function(){l(H)}),2e3)})).catch((function(){l(X),setTimeout((function(){l(H)}),2e3)}))):l(H)}),[r]),Object(a.jsx)("div",{className:i.buttonContainer,children:Object(a.jsxs)("div",{className:i.wrapper,children:[Object(a.jsx)(M.a,{"aria-label":"Guardar",className:Object(L.a)((t={},Object(p.a)(t,i.success,u===G),Object(p.a)(t,i.failure,u===X),t)),color:"primary",onClick:n,disabled:u===V,children:Object(a.jsxs)("div",{className:i.iconWrapper,children:[Object(a.jsx)(A.a,{in:u===H||u===V,appear:!1,children:Object(a.jsx)(T.a,{})}),Object(a.jsx)(A.a,{in:u===G,style:{transitionDelay:u===G?"200ms":"0ms"},children:Object(a.jsx)(Z.a,{})}),Object(a.jsx)(A.a,{in:u===X,style:{transitionDelay:u===X?"200ms":"0ms"},children:Object(a.jsx)(U.a,{})})]})}),u===V&&Object(a.jsx)(R.a,{size:68,className:i.progress})]})})},Q=n(145),_=r.a.createContext(void 0);_.displayName="AuthContext";var J=function(e){var t=e.children,n=Object(c.useState)(!1),r=Object(b.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)(void 0),u=Object(b.a)(s,2),l=u[0],d=u[1],j=Object(c.useCallback)((function(){var e="Hubo un error con el logueo. Estos programadores son todos iguales. Preguntale a Fer si lo puede arreglar.";return window.gapi.auth2.getAuthInstance().signIn().then((function(){o(!0)}),(function(){d(e)})).catch((function(){d(e)}))}),[]),p=Object(c.useCallback)((function(){return window.gapi.auth2.getAuthInstance().signOut().then((function(){o(!1)}))}),[]);Object(c.useEffect)((function(){S().then((function(){o(window.gapi.auth2.getAuthInstance().isSignedIn.get())})).catch((function(e){"idpiframe_initialization_failed"===e.error?d("Tu URL no est\xe1 admitida por Google. URL: ".concat(window.location.href)):d(JSON.stringify(e))}))}),[]);var O=Object(c.useMemo)((function(){return{isSignedIn:i,setIsSignedIn:o,error:l,signIn:j,signOut:p}}),[l,j,p,i]);return Object(a.jsx)(_.Provider,{value:O,children:t})};function q(){var e=r.a.useContext(_);if(void 0===e)throw new Error("useAuthContext tiene que estar dentro de un AuthContextProvider");return e}var K=Object(h.a)((function(e){return{root:{margin:e.spacing(3),textAlign:"center"},spacing:{marginBottom:e.spacing(2)},button:{marginTop:e.spacing(2)},errorMessage:{color:e.palette.error.main}}})),$=function(e){var t=e.onSignedIn,n=K(),r=q(),i=Object(c.useState)(""),o=Object(b.a)(i,2),s=o[0],u=o[1],l=Object(c.useCallback)((function(){r.signIn().then((function(){t&&t()}))}),[r,t]);return Object(c.useEffect)((function(){var e;u(null!==(e=r.error)&&void 0!==e?e:"")}),[r.error]),Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(f.a,{className:n.spacing,variant:"h4",children:"Oops! :("}),Object(a.jsx)(f.a,{className:n.spacing,variant:"body1",children:"Ten\xe9s que loguearte para poder usar la app"}),Object(a.jsx)(f.a,{className:n.errorMessage,variant:"body1",children:s}),Object(a.jsx)(Q.a,{className:n.button,color:"primary",onClick:l,children:"Loguearme con Google"})]})},ee=n(60),te=n(82),ne=function(e){var t=e.inputRef,n=void 0===t?void 0:t,r=e.onChange,i=void 0===r?void 0:r,o=e.value,s=void 0===o?void 0:o,u=Object(ee.a)(e,["inputRef","onChange","value"]),l=Object(c.useState)(""),d=Object(b.a)(l,2),j=d[0],p=d[1],h=Object(c.useRef)(""),g=Object(c.useCallback)((function(e){p(e.value),h.current=e.value}),[]),f=Object(c.useCallback)((function(e){e.target.value=h.current,i&&i(e)}),[i]);return Object(c.useEffect)((function(){p(null!==s&&void 0!==s?s:"")}),[s]),Object(a.jsx)(te.a,Object(O.a)(Object(O.a)({},u),{},{getInputRef:n,onValueChange:g,onChange:f,thousandSeparator:".",decimalSeparator:",",decimalScale:2,isNumericString:!0,allowNegative:!1,prefix:"$ ",value:j}))},ae=n(146),ce=n(158),re=n(154),ie=n(156),oe=["Casa","Supermercado","Farmacia","Electr\xf3nica","Gustos","Auto","Streaming","Otros","Maru"].sort(),se=function(e){var t=e.fullWidth,n=Object(ee.a)(e,["fullWidth"]);return Object(a.jsxs)(ae.a,{fullWidth:t,children:[Object(a.jsx)(ce.a,{id:"category-select-label",children:"Categor\xeda"}),Object(a.jsx)(re.a,Object(O.a)(Object(O.a)({labelId:"category-select-label",label:"Categor\xeda"},n),{},{children:oe.map((function(e){return Object(a.jsx)(ie.a,{value:e,children:e},"itCat".concat(e))}))}))]})},ue=Object(h.a)((function(e){return{input:{margin:e.spacing(3)},buttonContainer:{display:"flex",justifyContent:"center"},form:{},error:{color:e.palette.error.main,textAlign:"center",marginBottom:e.spacing(1)}}})),le={description:{value:"",error:!1},category:{value:"",error:!1},amount:{value:"",error:!1}};function de(e,t){if("reset"===t.action)return le;if(void 0!==t.name){if("update"===t.action&&"string"===typeof t.value)return Object(O.a)(Object(O.a)({},e),{},Object(p.a)({},t.name,Object(O.a)(Object(O.a)({},e[t.name]),{},{value:t.value})));if("validate"===t.action&&"boolean"===typeof t.value)return Object(O.a)(Object(O.a)({},e),{},Object(p.a)({},t.name,Object(O.a)(Object(O.a)({},e[t.name]),{},{error:t.value})))}return e}var je=function(){var e=ue(),t=Object(c.useReducer)(de,le),n=Object(b.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)(),s=Object(b.a)(o,2),u=s[0],l=s[1],d=Object(c.useState)(""),j=Object(b.a)(d,2),p=j[0],O=j[1],h=q(),v=Object(c.useCallback)((function(e){var t=e.target,n=t.name,a=t.value;i({action:"update",name:n,value:a}),i({action:"validate",name:n,value:!1})}),[i]),m=Object(c.useCallback)((function(){var e=!1;if(Object.keys(r).forEach((function(t){var n=C(r[t].value);n&&(e=!0),i({action:"validate",name:t,value:n})})),e)l(new Promise((function(e,t){t()})));else{var t=function(e,t,n){return E.apply(this,arguments)}(r.description.value,r.category.value,r.amount.value);t.then((function(){i({action:"reset"})})).catch((function(){O("Hubo un problema guardando los datos.")})),l(t)}}),[r]),x=Object(c.useCallback)((function(){h.setIsSignedIn(!0)}),[h]);return h.isSignedIn?Object(a.jsxs)("div",{children:[Object(a.jsxs)("form",{className:e.form,children:[Object(a.jsx)("div",{className:e.input,children:Object(a.jsx)(g.a,{label:"Descripci\xf3n",name:"description",fullWidth:!0,value:r.description.value,onChange:v,error:r.description.error})}),Object(a.jsx)("div",{className:e.input,children:Object(a.jsx)(se,{label:"Categor\xeda",name:"category",fullWidth:!0,value:r.category.value,onChange:v,error:r.category.error})}),Object(a.jsx)("div",{className:e.input,children:Object(a.jsx)(g.a,{label:"Cantidad",name:"amount",fullWidth:!0,value:r.amount.value,onChange:v,error:r.amount.error,InputProps:{inputComponent:ne}})})]}),Object(a.jsx)(f.a,{className:e.error,component:"div",variant:"body2",children:p}),Object(a.jsx)(B,{onClick:m,promise:u})]}):Object(a.jsx)($,{onSignedIn:x})},be=function(){var e=Object(j.f)();return Object(c.useEffect)((function(){setTimeout((function(){e.push("/")}),3e3)}),[e]),Object(a.jsx)("div",{children:"404 - P\xe1gina no encontrada Redirigiendo al inicio..."})},pe=function(){return Object(a.jsx)("div",{children:"Ac\xe1 van a aparecer gr\xe1ficos lindos."})},Oe=n(149),he=n(150),ge=n(151),fe=n(84),ve=n.n(fe),me=n(83),xe=n.n(me),Ce=Object(h.a)((function(){return{title:{flexGrow:1}}})),we=function(){var e=Ce(),t=Object(j.f)(),n=q(),r=Object(c.useCallback)((function(){t.push("/stats")}),[t]),i=Object(c.useCallback)((function(){n.signOut()}),[n]);return Object(a.jsx)(Oe.a,{position:"static",children:Object(a.jsxs)(he.a,{children:[Object(a.jsx)(f.a,{variant:"h6",className:e.title,children:"Nuevo gasto"}),Object(a.jsx)(ge.a,{"aria-label":"Estad\xedsticas",color:"inherit",onClick:r,children:Object(a.jsx)(xe.a,{})}),Object(a.jsx)(ge.a,{"aria-label":"Usuario",color:"inherit",onClick:i,children:Object(a.jsx)(ve.a,{})})]})})},ye=Object(s.a)({palette:{type:"light"},typography:{},props:{MuiButton:{variant:"contained"},MuiFormControl:{variant:"outlined"},MuiSelect:{variant:"outlined"},MuiTextField:{variant:"outlined"}}}),ke=function(){return Object(a.jsx)("div",{children:Object(a.jsxs)(u.a,{theme:ye,children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(J,{children:Object(a.jsxs)(d.a,{basename:"/gastos",children:[Object(a.jsx)(we,{}),Object(a.jsxs)(j.c,{children:[Object(a.jsx)(j.a,{exact:!0,path:"/",children:Object(a.jsx)(je,{})}),Object(a.jsx)(j.a,{exact:!0,path:"/stats",children:Object(a.jsx)(pe,{})}),Object(a.jsx)(j.a,{path:"*",children:Object(a.jsx)(be,{})})]})]})})]})})};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(ke,{})}),document.getElementById("root"))},97:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.8d39fa56.chunk.js.map