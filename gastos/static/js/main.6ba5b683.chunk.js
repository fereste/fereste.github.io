(this.webpackJsonpgastos=this.webpackJsonpgastos||[]).push([[0],{87:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(0),r=a.n(c),i=a(10),o=a.n(i),s=(a(87),a(75)),l=a(141),u=a(142),d=a(17),j=a(25),b=a(13),p=a(126),g=a(138),O=a(139),h=a(133),v=a(140),f=a(146),m=a(74),x=a.n(m);function w(e){return decodeURIComponent(escape(window.atob(e)))}var y=w("OTE5NDY5MjYwODgzLXNnMmduOHZtNHBmOWRudThkYm9tZDQzbzNiZzZrczhjLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29t"),C=w("QUl6YVN5Q2ktOV9jb2tpMHdOVXlDcHd6YlFOUk8xTm5wdFdkNHpZ"),N=["https://sheets.googleapis.com/$discovery/rest?version=v4"];w("MUlQX3pyTDgxRWoyVENMRDVxSVlXZFA4ZkZrM3hZWXZKXy1rb2daV0FhOUU=");function k(){var e,t,a,n;return null===(e=window.gapi.auth2)||void 0===e||null===(t=e.getAuthInstance())||void 0===t||null===(a=t.currentUser.get())||void 0===a||null===(n=a.getBasicProfile())||void 0===n?void 0:n.getGivenName()}function I(){return new Promise((function(e,t){window.gapi.load("client:auth2",function(e,t){return function(a){window.gapi.client.init({apiKey:C,clientId:y,discoveryDocs:N,scope:"https://www.googleapis.com/auth/spreadsheets"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen(a),a&&a(window.gapi.auth2.getAuthInstance().isSignedIn.get()),e()}),(function(e){t(e)}))}}(e,t))}))}var S=a(41),E=a.n(S),M=a(60);function R(e){return null===e||void 0===e||0===e.length}function A(){return(A=Object(M.a)(E.a.mark((function e(t,a,n){var c,r,i,o,s,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],R(t)&&c.push("descripci\xf3n"),R(a)&&c.push("categor\xeda"),R(n)&&c.push("cantidad"),!(c.length>0)){e.next=9;break}throw r=1===c.length?"tiene":"tienen",i=(i="".concat(c.join(", "))).slice(0,1).toLocaleUpperCase().concat(i.slice(1)),new Error("".concat(i," ").concat(r," error."));case 9:return e.prev=9,o=(new Date).toLocaleString("es-AR",{year:"numeric",month:"2-digit",day:"2-digit"}),s=k(),l="",l="Fernando"===s?"Fer":"Mariela"===s?"Maru":s,e.next=16,window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:"1IP_zrL81Ej2TCLD5qIYWdP8fFk3xYYvJ_-kogZWAa9E",range:"Gastos!A2:E",valueInputOption:"USER_ENTERED",resource:{values:[[t,a,n,o,l]]}});case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(9),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[9,18]])})))).apply(this,arguments)}var D=a(129),W=a(131),Z=a(132),F=a(70),T=a.n(F),U=a(71),z=a.n(U),L=a(72),Y=a.n(L),H=a(56),V=a(55),G=a(3),P=Object(p.a)((function(e){return{buttonContainer:{display:"flex",justifyContent:"center"},wrapper:{margin:e.spacing(1),position:"absolute"},success:{backgroundColor:H.a[500],"&:hover":{backgroundColor:H.a[700]}},failure:{backgroundColor:V.a[500],"&:hover":{backgroundColor:V.a[700]}},progress:{color:H.a[500],position:"absolute",top:-6,left:-6,zIndex:1},iconWrapper:{display:"flex",alignItems:"center",justifyContent:"center","& *":{position:"absolute"}}}})),X=0,B=1,Q=2,_=3,J=function(e){var t,a=e.onClick,r=e.promise,i=P(),o=Object(c.useState)(X),s=Object(d.a)(o,2),l=s[0],u=s[1];return Object(c.useEffect)((function(){r?(u(B),r.then((function(){u(Q),setTimeout((function(){u(X)}),2e3)})).catch((function(){u(_),setTimeout((function(){u(X)}),2e3)}))):u(X)}),[r]),Object(n.jsx)("div",{className:i.buttonContainer,children:Object(n.jsxs)("div",{className:i.wrapper,children:[Object(n.jsx)(D.a,{"aria-label":"Guardar",className:Object(G.a)((t={},Object(j.a)(t,i.success,l===Q),Object(j.a)(t,i.failure,l===_),t)),color:"primary",onClick:a,disabled:l===B,children:Object(n.jsxs)("div",{className:i.iconWrapper,children:[Object(n.jsx)(W.a,{in:l===X||l===B,appear:!1,children:Object(n.jsx)(T.a,{})}),Object(n.jsx)(W.a,{in:l===Q,style:{transitionDelay:l===Q?"200ms":"0ms"},children:Object(n.jsx)(z.a,{})}),Object(n.jsx)(W.a,{in:l===_,style:{transitionDelay:l===_?"200ms":"0ms"},children:Object(n.jsx)(Y.a,{})})]})}),l===B&&Object(n.jsx)(Z.a,{size:68,className:i.progress})]})})},q=a(134),K=Object(p.a)((function(e){return{root:{margin:e.spacing(3),textAlign:"center"},spacing:{marginBottom:e.spacing(2)},button:{marginTop:e.spacing(2)},errorMessage:{color:e.palette.error.main}}})),$=function(e){var t=e.onSignedIn,a=K(),r=Object(c.useState)(""),i=Object(d.a)(r,2),o=i[0],s=i[1],l=Object(c.useCallback)((function(){window.gapi.auth2.getAuthInstance().signIn().then((function(){t&&t()})).catch((function(){s("Hubo un error con el logueo. Estos programadores son todos iguales. Preguntale a Fer si lo puede arreglar.")}))}),[t]);return Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(h.a,{className:a.spacing,variant:"h4",children:"Oops! :("}),Object(n.jsx)(h.a,{className:a.spacing,variant:"body1",children:"Ten\xe9s que loguearte para poder usar la app"}),Object(n.jsx)(h.a,{className:a.errorMessage,variant:"body1",children:o}),Object(n.jsx)(q.a,{className:a.button,color:"primary",onClick:l,children:"Loguearme con Google"})]})},ee=a(54),te=a(73),ae=function(e){var t=e.inputRef,a=void 0===t?void 0:t,r=e.onChange,i=void 0===r?void 0:r,o=e.value,s=void 0===o?void 0:o,l=Object(ee.a)(e,["inputRef","onChange","value"]),u=Object(c.useState)(""),j=Object(d.a)(u,2),p=j[0],g=j[1],O=Object(c.useRef)(""),h=Object(c.useCallback)((function(e){g(e.value),O.current=e.value}),[]),v=Object(c.useCallback)((function(e){e.target.value=O.current,i&&i(e)}),[i]);return Object(c.useEffect)((function(){g(null!==s&&void 0!==s?s:"")}),[s]),Object(n.jsx)(te.a,Object(b.a)(Object(b.a)({},l),{},{getInputRef:a,onValueChange:h,onChange:v,thousandSeparator:".",decimalSeparator:",",decimalScale:2,isNumericString:!0,allowNegative:!1,prefix:"$ ",value:p}))},ne=a(135),ce=a(144),re=a(143),ie=a(145),oe=["Casa","Supermercado","Farmacia","Electr\xf3nica","Gustos","Auto","Otros"].sort(),se=function(e){var t=e.fullWidth,a=Object(ee.a)(e,["fullWidth"]);return Object(n.jsxs)(ne.a,{fullWidth:t,children:[Object(n.jsx)(ce.a,{id:"category-select-label",children:"Categor\xeda"}),Object(n.jsx)(re.a,Object(b.a)(Object(b.a)({labelId:"category-select-label",label:"Categor\xeda"},a),{},{children:oe.map((function(e){return Object(n.jsx)(ie.a,{value:e,children:e},"itCat".concat(e))}))}))]})},le=Object(p.a)((function(e){return{title:{flexGrow:1},input:{margin:e.spacing(3)},buttonContainer:{display:"flex",justifyContent:"center"},form:{},error:{color:e.palette.error.main,textAlign:"center",marginBottom:e.spacing(1)}}})),ue={description:{value:"",error:!1},category:{value:"",error:!1},amount:{value:"",error:!1}};function de(e,t){if("reset"===t.action)return ue;if(void 0!==t.name){if("update"===t.action&&"string"===typeof t.value)return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},t.name,Object(b.a)(Object(b.a)({},e[t.name]),{},{value:t.value})));if("validate"===t.action&&"boolean"===typeof t.value)return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},t.name,Object(b.a)(Object(b.a)({},e[t.name]),{},{error:t.value})))}return e}var je=function(){var e=le(),t=Object(c.useReducer)(de,ue),a=Object(d.a)(t,2),r=a[0],i=a[1],o=Object(c.useState)(),s=Object(d.a)(o,2),l=s[0],u=s[1],j=Object(c.useState)(!0),b=Object(d.a)(j,2),p=b[0],m=b[1],w=Object(c.useState)(""),y=Object(d.a)(w,2),C=y[0],N=y[1],k=Object(c.useCallback)((function(e){var t=e.target,a=t.name,n=t.value;i({action:"update",name:a,value:n}),i({action:"validate",name:a,value:!1})}),[i]),S=Object(c.useCallback)((function(){var e=!1;if(Object.keys(r).forEach((function(t){var a=R(r[t].value);a&&(e=!0),i({action:"validate",name:t,value:a})})),e)u(new Promise((function(e,t){t()})));else{var t=function(e,t,a){return A.apply(this,arguments)}(r.description.value,r.category.value,r.amount.value);t.then((function(){i({action:"reset"})})).catch((function(){N("Hubo un problema guardando los datos.")})),u(t)}}),[r]);Object(c.useEffect)((function(){I().then((function(){m(window.gapi.auth2.getAuthInstance().isSignedIn.get())})).catch((function(e){"idpiframe_initialization_failed"===e.error?N("Tu URL no est\xe1 admitida por Google. URL: ".concat(window.location.href)):N(JSON.stringify(e))}))}),[]);var E=Object(c.useCallback)((function(){window.gapi.auth2.getAuthInstance().signOut().then((function(){m(!1)}))}),[]),M=Object(c.useCallback)((function(){m(!0)}),[]);return p?Object(n.jsxs)("div",{children:[Object(n.jsx)(g.a,{position:"static",children:Object(n.jsxs)(O.a,{children:[Object(n.jsx)(h.a,{variant:"h6",className:e.title,children:"Nuevo gasto"}),Object(n.jsx)(v.a,{"aria-label":"Usuario",color:"inherit",onClick:E,children:Object(n.jsx)(x.a,{})})]})}),Object(n.jsxs)("form",{className:e.form,children:[Object(n.jsx)("div",{className:e.input,children:Object(n.jsx)(f.a,{label:"Descripci\xf3n",name:"description",fullWidth:!0,value:r.description.value,onChange:k,error:r.description.error})}),Object(n.jsx)("div",{className:e.input,children:Object(n.jsx)(se,{label:"Categor\xeda",name:"category",fullWidth:!0,value:r.category.value,onChange:k,error:r.category.error})}),Object(n.jsx)("div",{className:e.input,children:Object(n.jsx)(f.a,{label:"Cantidad",name:"amount",fullWidth:!0,value:r.amount.value,onChange:k,error:r.amount.error,InputProps:{inputComponent:ae}})})]}),Object(n.jsx)(h.a,{className:e.error,component:"div",variant:"body2",children:C}),Object(n.jsx)(J,{onClick:S,promise:l})]}):Object(n.jsx)($,{onSignedIn:M})},be=Object(s.a)({palette:{type:"light"},typography:{},props:{MuiButton:{variant:"contained"},MuiFormControl:{variant:"outlined"},MuiSelect:{variant:"outlined"},MuiTextField:{variant:"outlined"}}}),pe=function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(l.a,{theme:be,children:[Object(n.jsx)(u.a,{}),Object(n.jsx)(je,{})]})})};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(pe,{})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.6ba5b683.chunk.js.map