{"version":3,"sources":["api/sheetsApi.js","components/SaveButton.jsx","pages/UnloggedPage.jsx","pages/MainPage.jsx","App.tsx","index.js"],"names":["clientId","b64_to_utf8","apiKey","discoveryDocs","scopes","str","decodeURIComponent","escape","window","atob","gapiLoad","Promise","resolve","reject","gapi","load","signInCallback","client","init","scope","then","auth2","getAuthInstance","isSignedIn","listen","get","error","Error","JSON","stringify","initClient","signIn","signOut","writeGasto","description","category","amount","a","errors","isNullOrEmpty","push","length","verb","join","sheets","spreadsheets","values","append","spreadsheetId","range","valueInputOption","resource","value","undefined","useStyles","makeStyles","theme","buttonContainer","display","justifyContent","wrapper","margin","spacing","position","success","backgroundColor","green","failure","red","progress","color","top","left","zIndex","iconWrapper","alignItems","buttonStates","SaveButton","onClick","promise","classes","useState","state","setState","useEffect","setTimeout","catch","className","Fab","aria-label","clsx","disabled","Fade","in","appear","style","transitionDelay","CircularProgress","size","root","textAlign","marginBottom","button","marginTop","errorMessage","palette","main","UnloggedPage","onSignedIn","setErrorMessage","handleSignInClick","useCallback","Typography","variant","Button","title","flexGrow","input","form","initialFormValues","fieldsReducer","previous","action","reset","name","MainPage","useReducer","fields","updateFields","setPromise","signedIn","setSignedIn","handleFieldChange","target","handleClick","writePromise","handleSignOutClick","handleSignIn","AppBar","Toolbar","IconButton","TextField","label","onChange","createMuiTheme","type","typography","props","MuiButton","MuiTextField","App","CssBaseline","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ee2bc2aa.chunk.js","sourcesContent":["const encriptedClientId = 'OTE5NDY5MjYwODgzLXNnMmduOHZtNHBmOWRudThkYm9tZDQzbzNiZzZrczhjLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29t';\r\nconst encriptedApiKey = 'QUl6YVN5Q2ktOV9jb2tpMHdOVXlDcHd6YlFOUk8xTm5wdFdkNHpZ';\r\nconst clientId = b64_to_utf8(encriptedClientId);\r\nconst apiKey = b64_to_utf8(encriptedApiKey);\r\nconst discoveryDocs = [\"https://sheets.googleapis.com/$discovery/rest?version=v4\"];\r\nconst scopes = \"https://www.googleapis.com/auth/spreadsheets\";\r\nconst encriptedSpreadsheetId = 'MUlQX3pyTDgxRWoyVENMRDVxSVlXZFA4ZkZrM3hZWXZKXy1rb2daV0FhOUU=';\r\nconst spreadsheetId = b64_to_utf8(encriptedSpreadsheetId);\r\n\r\nfunction utf8_to_b64(str) {\r\n    return window.btoa(unescape(encodeURIComponent(str)));\r\n}\r\n\r\nfunction b64_to_utf8(str) {\r\n    return decodeURIComponent(escape(window.atob(str)));\r\n}\r\n\r\n/**\r\n *  On load, called to load the auth2 library and API client library.\r\n */\r\nexport function gapiLoad() {\r\n    return new Promise((resolve, reject) => {\r\n        window.gapi.load('client:auth2', initClient(resolve, reject));\r\n    });\r\n}\r\n\r\n/**\r\n *  Initializes the API client library and sets up sign-in state listeners.\r\n */\r\nexport function initClient(resolve, reject) {\r\n    return function (signInCallback) {\r\n        window.gapi.client.init({\r\n            apiKey: apiKey,\r\n            clientId: clientId,\r\n            discoveryDocs: discoveryDocs,\r\n            scope: scopes\r\n        }).then(() => {\r\n            // Listen for sign-in state changes.\r\n            window.gapi.auth2.getAuthInstance().isSignedIn.listen(signInCallback);\r\n\r\n            // Handle the initial sign-in state.\r\n            if (signInCallback)\r\n                signInCallback(window.gapi.auth2.getAuthInstance().isSignedIn.get());\r\n\r\n            resolve();\r\n        }, (error) => {\r\n            reject();\r\n            throw new Error(JSON.stringify(error, null, 2));\r\n        });\r\n    }\r\n}\r\n\r\nexport function isSignedIn() {\r\n    return window.gapi.auth2.getAuthInstance().isSignedIn.get();\r\n}\r\n\r\n/**\r\n *  Called when the signed in status changes, to update the UI\r\n *  appropriately. After a sign-in, the API is called.\r\n */\r\nexport function handleSignIn(isSignedIn) {\r\n    // if (isSignedIn) {\r\n    //     document.getElementById('authorize_button').style.display = 'none';\r\n    //     document.getElementById('signout_button').style.display = 'block';\r\n    //     listMajors();\r\n    // } else {\r\n    //     document.getElementById('authorize_button').style.display = 'block';\r\n    //     document.getElementById('signout_button').style.display = 'none';\r\n    // }\r\n}\r\n\r\nexport function signIn() {\r\n    return window.gapi.auth2.getAuthInstance().signIn();\r\n}\r\n\r\nexport function signOut() {\r\n    return window.gapi.auth2.getAuthInstance().signOut();\r\n}\r\n\r\nexport async function getGastos() {\r\n    try {\r\n        const response = await window.gapi.client.sheets.spreadsheets.values.get({\r\n            spreadsheetId: spreadsheetId,\r\n            range: 'Gastos!A2:B',\r\n        });\r\n        const range = response.result;\r\n        let out = 'Apellido, Nombre:';\r\n        if (range.values.length > 0) {\r\n            for (let i = 0; i < range.values.length; i++) {\r\n                const row = range.values[i];\r\n                out += row[1] + ', ' + row[0];\r\n            }\r\n        } else {\r\n            out = 'No data found.';\r\n        }\r\n        return out;\r\n    }\r\n    catch {\r\n        throw new Error('Error haciendo spreadsheets.values.get');\r\n    }\r\n}\r\n\r\nexport async function writeGasto(description, category, amount) {\r\n    const errors = [];\r\n    if (isNullOrEmpty(description))\r\n        errors.push('description');\r\n    if (isNullOrEmpty(category))\r\n        errors.push('category');\r\n    if (isNullOrEmpty(amount))\r\n        errors.push('amount');\r\n\r\n    if (errors.length > 0) {\r\n        const verb = errors.length === 1 ? 'tiene' : 'tienen';\r\n        throw new Error(`${errors.join(', ')} ${verb} error.`);\r\n    }\r\n\r\n    try {\r\n        await window.gapi.client.sheets.spreadsheets.values.append({\r\n            spreadsheetId: '1IP_zrL81Ej2TCLD5qIYWdP8fFk3xYYvJ_-kogZWAa9E',\r\n            range: 'Gastos!A2:B',\r\n            valueInputOption: 'USER_ENTERED',\r\n            resource: {\r\n                values: [[description, category, amount]]\r\n            }\r\n        });\r\n    }\r\n    catch (error) {\r\n        throw new Error(error);\r\n    }\r\n}\r\n\r\nfunction isNullOrEmpty(value) {\r\n    return value === null || value === undefined || (typeof value === 'string' && value.length === 0);\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n    CircularProgress, Fab, Fade, makeStyles\r\n} from '@material-ui/core';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport ErrorIcon from '@material-ui/icons/Close';\r\nimport { green, red } from '@material-ui/core/colors';\r\nimport clsx from 'clsx';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    buttonContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: 'absolute',\r\n    },\r\n    success: {\r\n        backgroundColor: green[500],\r\n        '&:hover': {\r\n            backgroundColor: green[700]\r\n        }\r\n    },\r\n    failure: {\r\n        backgroundColor: red[500],\r\n        '&:hover': {\r\n            backgroundColor: red[700]\r\n        }\r\n    },\r\n    progress: {\r\n        color: green[500],\r\n        position: 'absolute',\r\n        top: -6,\r\n        left: -6,\r\n        zIndex: 1,\r\n    },\r\n    iconWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        '& *': {\r\n            position: 'absolute'\r\n        }\r\n    }\r\n}));\r\n\r\nconst buttonStates = {\r\n    idle: 0, loading: 1, success: 2, failure: 3\r\n};\r\n\r\nconst SaveButton = ({\r\n    onClick,\r\n    promise,\r\n}) => {\r\n    const classes = useStyles();\r\n    const [state, setState] = useState(buttonStates.idle);\r\n\r\n    useEffect(() => {\r\n        if (promise) {\r\n            setState(buttonStates.loading);\r\n            promise.then(() => {\r\n                setState(buttonStates.success)\r\n                setTimeout(() => { setState(buttonStates.idle); }, 2000);\r\n            }\r\n            ).catch(() => {\r\n                setState(buttonStates.failure);\r\n                setTimeout(() => { setState(buttonStates.idle); }, 2000);\r\n            });\r\n        }\r\n        else {\r\n            setState(buttonStates.idle);\r\n        }\r\n    }, [promise]);\r\n\r\n    return (\r\n        <div className={classes.buttonContainer}>\r\n            <div className={classes.wrapper}>\r\n                <Fab\r\n                    aria-label=\"Guardar\"\r\n                    className={clsx({\r\n                        [classes.success]: state === buttonStates.success,\r\n                        [classes.failure]: state === buttonStates.failure\r\n                    })}\r\n                    color=\"primary\"\r\n                    onClick={onClick}\r\n                    disabled={state === buttonStates.loading}\r\n                >\r\n                    <div className={classes.iconWrapper}>\r\n                        <Fade\r\n                            in={state === buttonStates.idle || state === buttonStates.loading}\r\n                            appear={false}\r\n                        >\r\n                            <SaveIcon />\r\n                        </Fade>\r\n                        <Fade\r\n                            in={state === buttonStates.success}\r\n                            style={{\r\n                                transitionDelay: state === buttonStates.success ? '200ms' : '0ms'\r\n                            }}\r\n                        >\r\n                            <CheckIcon />\r\n                        </Fade>\r\n                        <Fade\r\n                            in={state === buttonStates.failure}\r\n                            style={{\r\n                                transitionDelay: state === buttonStates.failure ? '200ms' : '0ms'\r\n                            }}\r\n                        >\r\n                            <ErrorIcon />\r\n                        </Fade>\r\n                    </div>\r\n                    {/* {state === 'success' ? <CheckIcon /> : <SaveIcon />} */}\r\n                </Fab>\r\n                {\r\n                    state === buttonStates.loading\r\n                    && <CircularProgress size={68} className={classes.progress} />\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SaveButton;\r\n","import React, { useCallback, useState } from 'react';\r\nimport { Button, makeStyles, Typography } from '@material-ui/core';\r\nimport { signIn } from '../api/sheetsApi';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        margin: theme.spacing(3),\r\n        textAlign: 'center',\r\n    },\r\n    spacing: {\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    button: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    errorMessage: {\r\n        color: theme.palette.error.main\r\n    },\r\n}));\r\n\r\nconst UnloggedPage = ({ onSignedIn }) => {\r\n    const classes = useStyles();\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    const handleSignInClick = useCallback(() => {\r\n        signIn().then(() => {\r\n            if (onSignedIn)\r\n                onSignedIn();\r\n        }).catch(() => {\r\n            setErrorMessage('Hubo un error con el logueo. Estos programadores son todos iguales. Preguntale a Fer si lo puede arreglar.');\r\n        });\r\n    }, [signIn]);\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Typography className={classes.spacing} variant=\"h4\">\r\n                Oops! :(\r\n            </Typography>\r\n            <Typography className={classes.spacing} variant=\"body1\">\r\n                Tenés que loguearte para poder usar la app\r\n            </Typography>\r\n            <Typography className={classes.errorMessage} variant=\"body1\">\r\n                {errorMessage}\r\n            </Typography>\r\n            <Button\r\n                className={classes.button}\r\n                color=\"primary\"\r\n                onClick={handleSignInClick}\r\n            >\r\n                Loguearme con Google\r\n            </Button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UnloggedPage;\r\n","import { AppBar, Button, IconButton, makeStyles, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport React, { useCallback, useEffect, useReducer, useState } from 'react';\r\nimport { gapiLoad, isSignedIn, signIn, writeGasto, signOut } from '../api/sheetsApi';\r\nimport AccountIcon from '@material-ui/icons/AccountCircle'\r\nimport SaveButton from '../components/SaveButton';\r\nimport UnloggedPage from './UnloggedPage';\r\n//import NumberFormatCustom from '../components/NumberFormatCustom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        flexGrow: 1\r\n    },\r\n    input: {\r\n        margin: theme.spacing(3),\r\n    },\r\n    buttonContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    form: {\r\n        textAlign: 'center',\r\n    },\r\n}));\r\n\r\nconst initialFormValues = {\r\n    description: '',\r\n    category: '',\r\n    amount: '',\r\n};\r\n\r\nfunction fieldsReducer(previous, action) {\r\n    if (action.reset)\r\n        return initialFormValues;\r\n    return { ...previous, [action.name]: action.value };\r\n}\r\n\r\nconst MainPage = () => {\r\n    const classes = useStyles();\r\n    const [fields, updateFields] = useReducer(fieldsReducer, initialFormValues);\r\n    const [promise, setPromise] = useState();\r\n    const [signedIn, setSignedIn] = useState(true);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    const handleFieldChange = useCallback((name) => ({ target: { value } }) => {\r\n        updateFields({ name, value });\r\n    }, [updateFields]);\r\n\r\n    const handleClick = useCallback(() => {\r\n        const writePromise = writeGasto(fields.description, fields.category, fields.amount);\r\n        writePromise.then(() => {\r\n            updateFields({ reset: true });\r\n        }).catch(() => { });\r\n        setPromise(writePromise);\r\n    }, [writeGasto]);\r\n\r\n    useEffect(() => {\r\n        gapiLoad().then(() => {\r\n            setSignedIn(isSignedIn());\r\n        });\r\n    }, [gapiLoad, isSignedIn]);\r\n\r\n    const handleSignOutClick = useCallback(() => {\r\n        signOut().then(() => {\r\n            setSignedIn(false);\r\n        });\r\n    }, [signOut, isSignedIn]);\r\n\r\n    const handleSignIn = useCallback(() => {\r\n        setSignedIn(true);\r\n    }, []);\r\n\r\n    if (!signedIn) {\r\n        return (<UnloggedPage onSignedIn={handleSignIn} />);\r\n    }\r\n    else {\r\n        return (\r\n            <div>\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" className={classes.title}>\r\n                            Nuevo gasto\r\n                    </Typography>\r\n                        <IconButton\r\n                            aria-label=\"Usuario\"\r\n                            color=\"inherit\"\r\n                            onClick={handleSignOutClick}\r\n                        >\r\n                            <AccountIcon />\r\n                        </IconButton>\r\n                    </Toolbar>\r\n                </AppBar>\r\n\r\n                <form className={classes.form}>\r\n                    <div className={classes.input}>\r\n                        <TextField\r\n                            label=\"Descripción\"\r\n                            value={fields.description}\r\n                            onChange={handleFieldChange('description')}\r\n                        />\r\n                    </div>\r\n                    <div className={classes.input}>\r\n                        <TextField\r\n                            label=\"Categoría\"\r\n                            value={fields.category}\r\n                            onChange={handleFieldChange('category')}\r\n                        />\r\n                    </div>\r\n                    <div className={classes.input}>\r\n                        <TextField\r\n                            label=\"Cantidad\"\r\n                            value={fields.amount}\r\n                            onChange={handleFieldChange('amount')}\r\n                        // InputProps={{\r\n                        //     startAdornment: (\r\n                        //         <InputAdornment position=\"start\">\r\n                        //             $\r\n                        //         </InputAdornment>\r\n                        //     ),\r\n                        //     //inputComponent: NumberFormatCustom\r\n                        // }}\r\n                        />\r\n                    </div>\r\n                </form>\r\n                <SaveButton\r\n                    onClick={handleClick}\r\n                    promise={promise}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nexport default MainPage;\r\n","import { createMuiTheme, CssBaseline, MuiThemeProvider } from '@material-ui/core';\nimport MainPage from './pages/MainPage';\n\nconst theme = createMuiTheme({\n    palette: {\n        type: 'light'\n        // primary: { main: lightGreen[300] },\n        // secondary: { main: indigo.A100 },\n        // background: { default: blueGrey[900] },\n    },\n    typography: {\n        // allVariants: { color: 'white' }\n    },\n    props: {\n        MuiButton: {\n            variant: 'contained'\n        },\n        MuiTextField: {\n            variant: 'outlined'\n        }\n    }\n});\n\nfunction App() {\n    return (\n        <div>\n            <MuiThemeProvider theme={theme}>\n                <CssBaseline />\n                <MainPage />\n            </MuiThemeProvider>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}