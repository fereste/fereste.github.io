(this.webpackJsonpgastos=this.webpackJsonpgastos||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a(0),r=a.n(c),i=a(10),o=a.n(i),s=(a(97),a(85)),l=a(152),u=a(153),d=a(53),j=a(11),b=a(20),p=a(29),O=a(14),h=a(137),g=a(149),f=a(150),v=a(144),m=a(151),x=a(155),w=a(84),C=a.n(w),y=a(83),k=a.n(y);function N(e){return decodeURIComponent(escape(window.atob(e)))}var I=N("OTE5NDY5MjYwODgzLXNnMmduOHZtNHBmOWRudThkYm9tZDQzbzNiZzZrczhjLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29t"),S=N("QUl6YVN5Q2ktOV9jb2tpMHdOVXlDcHd6YlFOUk8xTm5wdFdkNHpZ"),E=["https://sheets.googleapis.com/$discovery/rest?version=v4"];N("MUlQX3pyTDgxRWoyVENMRDVxSVlXZFA4ZkZrM3hZWXZKXy1rb2daV0FhOUU=");function M(){var e,t,a,n;return null===(e=window.gapi.auth2)||void 0===e||null===(t=e.getAuthInstance())||void 0===t||null===(a=t.currentUser.get())||void 0===a||null===(n=a.getBasicProfile())||void 0===n?void 0:n.getGivenName()}function R(){return new Promise((function(e,t){window.gapi.load("client:auth2",function(e,t){return function(a){window.gapi.client.init({apiKey:S,clientId:I,discoveryDocs:E,scope:"https://www.googleapis.com/auth/spreadsheets"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen(a),a&&a(window.gapi.auth2.getAuthInstance().isSignedIn.get()),e()}),(function(e){t(e)}))}}(e,t))}))}var A=a(48),D=a.n(A),T=a(66);function W(e){return null===e||void 0===e||0===e.length}function Z(){return(Z=Object(T.a)(D.a.mark((function e(t,a,n){var c,r,i,o,s,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],W(t)&&c.push("descripci\xf3n"),W(a)&&c.push("categor\xeda"),W(n)&&c.push("cantidad"),!(c.length>0)){e.next=9;break}throw r=1===c.length?"tiene":"tienen",i=(i="".concat(c.join(", "))).slice(0,1).toLocaleUpperCase().concat(i.slice(1)),new Error("".concat(i," ").concat(r," error."));case 9:return e.prev=9,o=(new Date).toLocaleString("es-AR",{year:"numeric",month:"2-digit",day:"2-digit"}),s=M(),l="",l="Fernando"===s?"Fer":"Mariela"===s?"Maru":s,e.next=16,window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:"1IP_zrL81Ej2TCLD5qIYWdP8fFk3xYYvJ_-kogZWAa9E",range:"Gastos!A2:E",valueInputOption:"USER_ENTERED",resource:{values:[[t,a,n,o,l]]}});case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(9),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[9,18]])})))).apply(this,arguments)}var F=a(140),U=a(142),z=a(143),L=a(79),Y=a.n(L),H=a(80),P=a.n(H),V=a(81),G=a.n(V),X=a(62),B=a(61),Q=a(3),_=Object(h.a)((function(e){return{buttonContainer:{display:"flex",justifyContent:"center"},wrapper:{margin:e.spacing(1),position:"absolute"},success:{backgroundColor:X.a[500],"&:hover":{backgroundColor:X.a[700]}},failure:{backgroundColor:B.a[500],"&:hover":{backgroundColor:B.a[700]}},progress:{color:X.a[500],position:"absolute",top:-6,left:-6,zIndex:1},iconWrapper:{display:"flex",alignItems:"center",justifyContent:"center","& *":{position:"absolute"}}}})),J=0,q=1,K=2,$=3,ee=function(e){var t,a=e.onClick,r=e.promise,i=_(),o=Object(c.useState)(J),s=Object(b.a)(o,2),l=s[0],u=s[1];return Object(c.useEffect)((function(){r?(u(q),r.then((function(){u(K),setTimeout((function(){u(J)}),2e3)})).catch((function(){u($),setTimeout((function(){u(J)}),2e3)}))):u(J)}),[r]),Object(n.jsx)("div",{className:i.buttonContainer,children:Object(n.jsxs)("div",{className:i.wrapper,children:[Object(n.jsx)(F.a,{"aria-label":"Guardar",className:Object(Q.a)((t={},Object(p.a)(t,i.success,l===K),Object(p.a)(t,i.failure,l===$),t)),color:"primary",onClick:a,disabled:l===q,children:Object(n.jsxs)("div",{className:i.iconWrapper,children:[Object(n.jsx)(U.a,{in:l===J||l===q,appear:!1,children:Object(n.jsx)(Y.a,{})}),Object(n.jsx)(U.a,{in:l===K,style:{transitionDelay:l===K?"200ms":"0ms"},children:Object(n.jsx)(P.a,{})}),Object(n.jsx)(U.a,{in:l===$,style:{transitionDelay:l===$?"200ms":"0ms"},children:Object(n.jsx)(G.a,{})})]})}),l===q&&Object(n.jsx)(z.a,{size:68,className:i.progress})]})})},te=a(145),ae=Object(h.a)((function(e){return{root:{margin:e.spacing(3),textAlign:"center"},spacing:{marginBottom:e.spacing(2)},button:{marginTop:e.spacing(2)},errorMessage:{color:e.palette.error.main}}})),ne=function(e){var t=e.onSignedIn,a=ae(),r=Object(c.useState)(""),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(c.useCallback)((function(){window.gapi.auth2.getAuthInstance().signIn().then((function(){t&&t()})).catch((function(){s("Hubo un error con el logueo. Estos programadores son todos iguales. Preguntale a Fer si lo puede arreglar.")}))}),[t]);return Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(v.a,{className:a.spacing,variant:"h4",children:"Oops! :("}),Object(n.jsx)(v.a,{className:a.spacing,variant:"body1",children:"Ten\xe9s que loguearte para poder usar la app"}),Object(n.jsx)(v.a,{className:a.errorMessage,variant:"body1",children:o}),Object(n.jsx)(te.a,{className:a.button,color:"primary",onClick:l,children:"Loguearme con Google"})]})},ce=a(60),re=a(82),ie=function(e){var t=e.inputRef,a=void 0===t?void 0:t,r=e.onChange,i=void 0===r?void 0:r,o=e.value,s=void 0===o?void 0:o,l=Object(ce.a)(e,["inputRef","onChange","value"]),u=Object(c.useState)(""),d=Object(b.a)(u,2),j=d[0],p=d[1],h=Object(c.useRef)(""),g=Object(c.useCallback)((function(e){p(e.value),h.current=e.value}),[]),f=Object(c.useCallback)((function(e){e.target.value=h.current,i&&i(e)}),[i]);return Object(c.useEffect)((function(){p(null!==s&&void 0!==s?s:"")}),[s]),Object(n.jsx)(re.a,Object(O.a)(Object(O.a)({},l),{},{getInputRef:a,onValueChange:g,onChange:f,thousandSeparator:".",decimalSeparator:",",decimalScale:2,isNumericString:!0,allowNegative:!1,prefix:"$ ",value:j}))},oe=a(146),se=a(158),le=a(154),ue=a(156),de=["Casa","Supermercado","Farmacia","Electr\xf3nica","Gustos","Auto","Streaming","Otros","Maru"].sort(),je=function(e){var t=e.fullWidth,a=Object(ce.a)(e,["fullWidth"]);return Object(n.jsxs)(oe.a,{fullWidth:t,children:[Object(n.jsx)(se.a,{id:"category-select-label",children:"Categor\xeda"}),Object(n.jsx)(le.a,Object(O.a)(Object(O.a)({labelId:"category-select-label",label:"Categor\xeda"},a),{},{children:de.map((function(e){return Object(n.jsx)(ue.a,{value:e,children:e},"itCat".concat(e))}))}))]})},be=Object(h.a)((function(e){return{title:{flexGrow:1},input:{margin:e.spacing(3)},buttonContainer:{display:"flex",justifyContent:"center"},form:{},error:{color:e.palette.error.main,textAlign:"center",marginBottom:e.spacing(1)}}})),pe={description:{value:"",error:!1},category:{value:"",error:!1},amount:{value:"",error:!1}};function Oe(e,t){if("reset"===t.action)return pe;if(void 0!==t.name){if("update"===t.action&&"string"===typeof t.value)return Object(O.a)(Object(O.a)({},e),{},Object(p.a)({},t.name,Object(O.a)(Object(O.a)({},e[t.name]),{},{value:t.value})));if("validate"===t.action&&"boolean"===typeof t.value)return Object(O.a)(Object(O.a)({},e),{},Object(p.a)({},t.name,Object(O.a)(Object(O.a)({},e[t.name]),{},{error:t.value})))}return e}var he=function(){var e=be(),t=Object(j.f)(),a=Object(c.useReducer)(Oe,pe),r=Object(b.a)(a,2),i=r[0],o=r[1],s=Object(c.useState)(),l=Object(b.a)(s,2),u=l[0],d=l[1],p=Object(c.useState)(!0),O=Object(b.a)(p,2),h=O[0],w=O[1],y=Object(c.useState)(""),N=Object(b.a)(y,2),I=N[0],S=N[1],E=Object(c.useCallback)((function(e){var t=e.target,a=t.name,n=t.value;o({action:"update",name:a,value:n}),o({action:"validate",name:a,value:!1})}),[o]),M=Object(c.useCallback)((function(){var e=!1;if(Object.keys(i).forEach((function(t){var a=W(i[t].value);a&&(e=!0),o({action:"validate",name:t,value:a})})),e)d(new Promise((function(e,t){t()})));else{var t=function(e,t,a){return Z.apply(this,arguments)}(i.description.value,i.category.value,i.amount.value);t.then((function(){o({action:"reset"})})).catch((function(){S("Hubo un problema guardando los datos.")})),d(t)}}),[i]);Object(c.useEffect)((function(){R().then((function(){w(window.gapi.auth2.getAuthInstance().isSignedIn.get())})).catch((function(e){"idpiframe_initialization_failed"===e.error?S("Tu URL no est\xe1 admitida por Google. URL: ".concat(window.location.href)):S(JSON.stringify(e))}))}),[]);var A=Object(c.useCallback)((function(){t.push("/stats")}),[t]),D=Object(c.useCallback)((function(){window.gapi.auth2.getAuthInstance().signOut().then((function(){w(!1)}))}),[]),T=Object(c.useCallback)((function(){w(!0)}),[]);return h?Object(n.jsxs)("div",{children:[Object(n.jsx)(g.a,{position:"static",children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(v.a,{variant:"h6",className:e.title,children:"Nuevo gasto"}),Object(n.jsx)(m.a,{"aria-label":"Estad\xedsticas",color:"inherit",onClick:A,children:Object(n.jsx)(k.a,{})}),Object(n.jsx)(m.a,{"aria-label":"Usuario",color:"inherit",onClick:D,children:Object(n.jsx)(C.a,{})})]})}),Object(n.jsxs)("form",{className:e.form,children:[Object(n.jsx)("div",{className:e.input,children:Object(n.jsx)(x.a,{label:"Descripci\xf3n",name:"description",fullWidth:!0,value:i.description.value,onChange:E,error:i.description.error})}),Object(n.jsx)("div",{className:e.input,children:Object(n.jsx)(je,{label:"Categor\xeda",name:"category",fullWidth:!0,value:i.category.value,onChange:E,error:i.category.error})}),Object(n.jsx)("div",{className:e.input,children:Object(n.jsx)(x.a,{label:"Cantidad",name:"amount",fullWidth:!0,value:i.amount.value,onChange:E,error:i.amount.error,InputProps:{inputComponent:ie}})})]}),Object(n.jsx)(v.a,{className:e.error,component:"div",variant:"body2",children:I}),Object(n.jsx)(ee,{onClick:M,promise:u})]}):Object(n.jsx)(ne,{onSignedIn:T})},ge=function(){var e=Object(j.f)();return Object(c.useEffect)((function(){setTimeout((function(){e.push("/")}),3e3)}),[e]),Object(n.jsx)("div",{children:"404 - P\xe1gina no encontrada Redirigiendo al inicio..."})},fe=function(){return Object(n.jsx)("div",{children:"Ac\xe1 van a aparecer gr\xe1ficos lindos."})},ve=Object(s.a)({palette:{type:"light"},typography:{},props:{MuiButton:{variant:"contained"},MuiFormControl:{variant:"outlined"},MuiSelect:{variant:"outlined"},MuiTextField:{variant:"outlined"}}}),me=function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(l.a,{theme:ve,children:[Object(n.jsx)(u.a,{}),Object(n.jsx)(d.a,{basename:"/gastos",children:Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/",children:Object(n.jsx)(he,{})}),Object(n.jsx)(j.a,{exact:!0,path:"/stats",children:Object(n.jsx)(fe,{})}),Object(n.jsx)(j.a,{path:"*",children:Object(n.jsx)(ge,{})})]})})]})})};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(me,{})}),document.getElementById("root"))},97:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.112e76a8.chunk.js.map