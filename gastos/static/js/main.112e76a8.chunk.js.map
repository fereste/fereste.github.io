{"version":3,"sources":["utils/encryption.ts","api/credentials.ts","api/authApi.ts","utils/utils.ts","api/sheetsApi.ts","components/SaveButton.tsx","pages/UnloggedPage.tsx","components/NumberFormatCustom.jsx","components/CategorySelect.tsx","pages/MainPage.tsx","pages/NotFoundPage.tsx","pages/StatsPage.tsx","App.tsx","index.jsx"],"names":["b64ToUtf8","str","decodeURIComponent","escape","window","atob","clientId","apiKey","discoveryDocs","getUser","gapi","auth2","getAuthInstance","currentUser","get","getBasicProfile","getGivenName","gapiLoad","Promise","resolve","reject","load","signInCallback","client","init","scope","then","isSignedIn","listen","error","initClient","isNullOrEmpty","value","undefined","length","description","category","amount","a","errors","push","verb","fields","join","slice","toLocaleUpperCase","concat","Error","date","Date","toLocaleString","year","month","day","user","name","sheets","spreadsheets","values","append","spreadsheetId","range","valueInputOption","resource","useStyles","makeStyles","theme","buttonContainer","display","justifyContent","wrapper","margin","spacing","position","success","backgroundColor","green","failure","red","progress","color","top","left","zIndex","iconWrapper","alignItems","buttonStates","SaveButton","onClick","promise","classes","useState","state","setState","useEffect","setTimeout","catch","className","Fab","aria-label","clsx","disabled","Fade","in","appear","style","transitionDelay","CircularProgress","size","root","textAlign","marginBottom","button","marginTop","errorMessage","palette","main","UnloggedPage","onSignedIn","setErrorMessage","handleSignInClick","useCallback","signIn","Typography","variant","Button","NumberFormatCustom","inputRef","onChange","props","controlledValue","setControlledValue","valueRef","useRef","handleValueChange","newValue","current","handleChange","event","target","getInputRef","onValueChange","thousandSeparator","decimalSeparator","decimalScale","isNumericString","allowNegative","prefix","categories","sort","CategorySelect","fullWidth","FormControl","InputLabel","id","Select","labelId","label","map","MenuItem","title","flexGrow","input","form","initialValues","fieldsReducer","previous","action","MainPage","history","useHistory","useReducer","updateFields","setPromise","signedIn","setSignedIn","handleFieldChange","handleSaveClick","formHasErrors","Object","keys","forEach","fieldName","writePromise","writeGasto","location","href","JSON","stringify","handleStatsClick","handleSignOutClick","signOut","handleSignIn","AppBar","Toolbar","IconButton","TextField","InputProps","inputComponent","component","NotFoundPage","StatsPage","createMuiTheme","type","typography","MuiButton","MuiFormControl","MuiSelect","MuiTextField","App","CssBaseline","basename","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.112e76a8.chunk.js","sourcesContent":["export function utf8ToB64(str: string) {\r\n    return window.btoa(unescape(encodeURIComponent(str)));\r\n}\r\n\r\nexport function b64ToUtf8(str: string) {\r\n    return decodeURIComponent(escape(window.atob(str)));\r\n}\r\n","import { b64ToUtf8 } from '../utils/encryption';\r\n\r\nconst encriptedClientId = 'OTE5NDY5MjYwODgzLXNnMmduOHZtNHBmOWRudThkYm9tZDQzbzNiZzZrczhjLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29t';\r\nconst encriptedApiKey = 'QUl6YVN5Q2ktOV9jb2tpMHdOVXlDcHd6YlFOUk8xTm5wdFdkNHpZ';\r\nconst encriptedSpreadsheetId = 'MUlQX3pyTDgxRWoyVENMRDVxSVlXZFA4ZkZrM3hZWXZKXy1rb2daV0FhOUU=';\r\n\r\nexport const clientId = b64ToUtf8(encriptedClientId);\r\nexport const apiKey = b64ToUtf8(encriptedApiKey);\r\nexport const discoveryDocs = ['https://sheets.googleapis.com/$discovery/rest?version=v4'];\r\nexport const scopes = 'https://www.googleapis.com/auth/spreadsheets';\r\nexport const spreadsheetId = b64ToUtf8(encriptedSpreadsheetId);\r\n","import { apiKey, clientId, discoveryDocs, scopes } from './credentials';\r\n\r\ntype PromiseFunction = (value?: unknown) => void;\r\ntype SignInCallback = (value: boolean) => void;\r\n\r\n/**\r\n *  Initializes the API client library and sets up sign-in state listeners.\r\n */\r\nexport function initClient(resolve: PromiseFunction, reject: PromiseFunction) {\r\n    return (signInCallback: SignInCallback) => {\r\n        window.gapi.client.init({\r\n            apiKey: apiKey,\r\n            clientId: clientId,\r\n            discoveryDocs: discoveryDocs,\r\n            scope: scopes,\r\n        }).then(() => {\r\n            // Listen for sign-in state changes.\r\n            window.gapi.auth2.getAuthInstance().isSignedIn.listen(signInCallback);\r\n\r\n            // Handle the initial sign-in state.\r\n            if (signInCallback) {\r\n                signInCallback(window.gapi.auth2.getAuthInstance().isSignedIn.get());\r\n            }\r\n\r\n            resolve();\r\n        }, (error: Record<string, unknown>) => {\r\n            reject(error);\r\n        });\r\n    };\r\n}\r\n\r\nexport function isSignedIn(): boolean {\r\n    return window.gapi.auth2.getAuthInstance().isSignedIn.get();\r\n}\r\n\r\nexport function signIn() {\r\n    return window.gapi.auth2.getAuthInstance().signIn();\r\n}\r\n\r\nexport function signOut() {\r\n    return window.gapi.auth2.getAuthInstance().signOut();\r\n}\r\n\r\nexport function getUser() {\r\n    return window.gapi.auth2?.getAuthInstance()?.currentUser.get()?.getBasicProfile()?.getGivenName();\r\n}\r\n\r\n/**\r\n *  On load, called to load the auth2 library and API client library.\r\n */\r\nexport function gapiLoad() {\r\n    return new Promise((resolve, reject) => {\r\n        window.gapi.load('client:auth2', initClient(resolve, reject));\r\n    });\r\n}\r\n","/* eslint-disable import/prefer-default-export */\r\nexport function isNullOrEmpty(value: string): boolean {\r\n    return value === null || value === undefined || value.length === 0;\r\n}\r\n","import { isNullOrEmpty } from '../utils/utils';\r\nimport { getUser } from './authApi';\r\nimport { spreadsheetId } from './credentials';\r\n\r\nexport async function getGastos() {\r\n    try {\r\n        const response = await window.gapi.client.sheets.spreadsheets.values.get({\r\n            spreadsheetId: spreadsheetId,\r\n            range: 'Gastos!A2:B',\r\n        });\r\n        const range = response.result;\r\n        let out = 'Apellido, Nombre:';\r\n        if (range.values && range.values.length > 0) {\r\n            for (let i = 0; i < range.values.length; i++) {\r\n                const row = range.values[i];\r\n                out += `${row[1]}, ${row[0]}`;\r\n            }\r\n        }\r\n        else {\r\n            out = 'No data found.';\r\n        }\r\n        return out;\r\n    }\r\n    catch {\r\n        throw new Error('Error haciendo spreadsheets.values.get');\r\n    }\r\n}\r\n\r\nexport async function writeGasto(description: string, category: string, amount: string) {\r\n    const errors = [];\r\n    if (isNullOrEmpty(description)) {\r\n        errors.push('descripción');\r\n    }\r\n    if (isNullOrEmpty(category)) {\r\n        errors.push('categoría');\r\n    }\r\n    if (isNullOrEmpty(amount)) {\r\n        errors.push('cantidad');\r\n    }\r\n\r\n    if (errors.length > 0) {\r\n        const verb = errors.length === 1 ? 'tiene' : 'tienen';\r\n        let fields = `${errors.join(', ')}`;\r\n        fields = fields.slice(0, 1).toLocaleUpperCase().concat(fields.slice(1));\r\n        throw new Error(`${fields} ${verb} error.`);\r\n    }\r\n\r\n    try {\r\n        const date = new Date().toLocaleString('es-AR', {\r\n            year: 'numeric',\r\n            month: '2-digit',\r\n            day: '2-digit',\r\n        });\r\n\r\n        const user = getUser();\r\n        let name = '';\r\n        if (user === 'Fernando') {\r\n            name = 'Fer';\r\n        }\r\n        else if (user === 'Mariela') {\r\n            name = 'Maru';\r\n        }\r\n        else {\r\n            name = user;\r\n        }\r\n\r\n        await window.gapi.client.sheets.spreadsheets.values.append({\r\n            spreadsheetId: '1IP_zrL81Ej2TCLD5qIYWdP8fFk3xYYvJ_-kogZWAa9E',\r\n            range: 'Gastos!A2:E',\r\n            valueInputOption: 'USER_ENTERED',\r\n            resource: {\r\n                values: [[description, category, amount, date, name]],\r\n            },\r\n        });\r\n    }\r\n    catch (error) {\r\n        throw new Error(error);\r\n    }\r\n}\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { CircularProgress, Fab, Fade, makeStyles } from '@material-ui/core';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport ErrorIcon from '@material-ui/icons/Close';\r\nimport { green, red } from '@material-ui/core/colors';\r\nimport clsx from 'clsx';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    buttonContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: 'absolute',\r\n    },\r\n    success: {\r\n        backgroundColor: green[500],\r\n        '&:hover': {\r\n            backgroundColor: green[700],\r\n        },\r\n    },\r\n    failure: {\r\n        backgroundColor: red[500],\r\n        '&:hover': {\r\n            backgroundColor: red[700],\r\n        },\r\n    },\r\n    progress: {\r\n        color: green[500],\r\n        position: 'absolute',\r\n        top: -6,\r\n        left: -6,\r\n        zIndex: 1,\r\n    },\r\n    iconWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        '& *': {\r\n            position: 'absolute',\r\n        },\r\n    },\r\n}));\r\n\r\nconst buttonStates = {\r\n    idle: 0, loading: 1, success: 2, failure: 3,\r\n};\r\n\r\ninterface SaveButtonProps {\r\n    onClick(): void,\r\n    promise: Promise<unknown> | undefined,\r\n}\r\n\r\nconst SaveButton: FC<SaveButtonProps> = ({\r\n    onClick,\r\n    promise,\r\n}) => {\r\n    const classes = useStyles();\r\n    const [state, setState] = useState(buttonStates.idle);\r\n\r\n    useEffect(() => {\r\n        if (promise) {\r\n            setState(buttonStates.loading);\r\n            promise.then(() => {\r\n                setState(buttonStates.success);\r\n                setTimeout(() => {\r\n                    setState(buttonStates.idle);\r\n                }, 2000);\r\n            }).catch(() => {\r\n                setState(buttonStates.failure);\r\n                setTimeout(() => {\r\n                    setState(buttonStates.idle);\r\n                }, 2000);\r\n            });\r\n        }\r\n        else {\r\n            setState(buttonStates.idle);\r\n        }\r\n    }, [promise]);\r\n\r\n    return (\r\n        <div className={classes.buttonContainer}>\r\n            <div className={classes.wrapper}>\r\n                <Fab\r\n                    aria-label=\"Guardar\"\r\n                    className={clsx({\r\n                        [classes.success]: state === buttonStates.success,\r\n                        [classes.failure]: state === buttonStates.failure,\r\n                    })}\r\n                    color=\"primary\"\r\n                    onClick={onClick}\r\n                    disabled={state === buttonStates.loading}\r\n                >\r\n                    <div className={classes.iconWrapper}>\r\n                        <Fade\r\n                            in={state === buttonStates.idle || state === buttonStates.loading}\r\n                            appear={false}\r\n                        >\r\n                            <SaveIcon />\r\n                        </Fade>\r\n                        <Fade\r\n                            in={state === buttonStates.success}\r\n                            style={{\r\n                                transitionDelay: state === buttonStates.success ? '200ms' : '0ms',\r\n                            }}\r\n                        >\r\n                            <CheckIcon />\r\n                        </Fade>\r\n                        <Fade\r\n                            in={state === buttonStates.failure}\r\n                            style={{\r\n                                transitionDelay: state === buttonStates.failure ? '200ms' : '0ms',\r\n                            }}\r\n                        >\r\n                            <ErrorIcon />\r\n                        </Fade>\r\n                    </div>\r\n                </Fab>\r\n                {\r\n                    state === buttonStates.loading\r\n                    && <CircularProgress size={68} className={classes.progress} />\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SaveButton;\r\n","import React, { useCallback, useState } from 'react';\r\nimport { Button, makeStyles, Typography } from '@material-ui/core';\r\nimport { signIn } from '../api/authApi';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        margin: theme.spacing(3),\r\n        textAlign: 'center',\r\n    },\r\n    spacing: {\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    button: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    errorMessage: {\r\n        color: theme.palette.error.main,\r\n    },\r\n}));\r\n\r\ninterface UnloggedPageProps {\r\n    onSignedIn?(): void,\r\n}\r\n\r\nconst UnloggedPage: React.VFC<UnloggedPageProps> = ({ onSignedIn }) => {\r\n    const classes = useStyles();\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    const handleSignInClick = useCallback(() => {\r\n        signIn().then(() => {\r\n            if (onSignedIn) {\r\n                onSignedIn();\r\n            }\r\n        }).catch(() => {\r\n            setErrorMessage('Hubo un error con el logueo. Estos programadores son todos iguales. Preguntale a Fer si lo puede arreglar.');\r\n        });\r\n    }, [onSignedIn]);\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Typography className={classes.spacing} variant=\"h4\">\r\n                Oops! :(\r\n            </Typography>\r\n            <Typography className={classes.spacing} variant=\"body1\">\r\n                Tenés que loguearte para poder usar la app\r\n            </Typography>\r\n            <Typography className={classes.errorMessage} variant=\"body1\">\r\n                {errorMessage}\r\n            </Typography>\r\n            <Button\r\n                className={classes.button}\r\n                color=\"primary\"\r\n                onClick={handleSignInClick}\r\n            >\r\n                Loguearme con Google\r\n            </Button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UnloggedPage;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport NumberFormat from 'react-number-format';\r\n\r\nconst NumberFormatCustom = ({\r\n    inputRef = undefined,\r\n    onChange = undefined,\r\n    value = undefined,\r\n    ...props\r\n}) => {\r\n    const [controlledValue, setControlledValue] = useState('');\r\n    const valueRef = useRef('');\r\n\r\n    const handleValueChange = useCallback((newValue) => {\r\n        setControlledValue(newValue.value);\r\n        valueRef.current = newValue.value;\r\n    }, []);\r\n\r\n    const handleChange = useCallback((event) => {\r\n        event.target.value = valueRef.current;\r\n        if (onChange) {\r\n            onChange(event);\r\n        }\r\n    }, [onChange]);\r\n\r\n    useEffect(() => {\r\n        setControlledValue(value ?? '');\r\n    }, [value]);\r\n\r\n    return (\r\n        <NumberFormat\r\n            {...props}\r\n            getInputRef={inputRef}\r\n            onValueChange={handleValueChange}\r\n            onChange={handleChange}\r\n            thousandSeparator=\".\"\r\n            decimalSeparator=\",\"\r\n            decimalScale={2}\r\n            isNumericString\r\n            allowNegative={false}\r\n            prefix=\"$ \"\r\n            value={controlledValue}\r\n        />\r\n    );\r\n};\r\n\r\nexport default NumberFormatCustom;\r\n","import React, { FC } from 'react';\r\nimport { FormControl, InputLabel, MenuItem, Select, SelectProps } from '@material-ui/core';\r\n\r\nconst categories = [\r\n    'Casa',\r\n    'Supermercado',\r\n    'Farmacia',\r\n    'Electrónica',\r\n    'Gustos',\r\n    'Auto',\r\n    'Streaming',\r\n    'Otros',\r\n    'Maru',\r\n].sort();\r\n\r\nconst CategorySelect: FC<SelectProps> = ({ fullWidth, ...props }) => {\r\n    return (\r\n        <FormControl fullWidth={fullWidth}>\r\n            <InputLabel id=\"category-select-label\">\r\n                Categoría\r\n            </InputLabel>\r\n            <Select\r\n                labelId=\"category-select-label\"\r\n                label=\"Categoría\"\r\n                {...props}\r\n            >\r\n                {categories.map((category) => (\r\n                    <MenuItem\r\n                        key={`itCat${category}`}\r\n                        value={category}\r\n                    >\r\n                        {category}\r\n                    </MenuItem>\r\n                ))}\r\n            </Select>\r\n        </FormControl>\r\n    );\r\n};\r\n\r\nexport default CategorySelect;\r\n","import React, { useCallback, useEffect, useReducer, useState } from 'react';\r\nimport { AppBar, IconButton, makeStyles, TextField, Toolbar, Typography } from '@material-ui/core';\r\nimport AccountIcon from '@material-ui/icons/AccountCircle';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { gapiLoad, isSignedIn, signOut } from '../api/authApi';\r\nimport { writeGasto } from '../api/sheetsApi';\r\nimport SaveButton from '../components/SaveButton';\r\nimport UnloggedPage from './UnloggedPage';\r\nimport { isNullOrEmpty } from '../utils/utils';\r\nimport NumberFormatCustom from '../components/NumberFormatCustom';\r\nimport CategorySelect from '../components/CategorySelect';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n    input: {\r\n        margin: theme.spacing(3),\r\n    },\r\n    buttonContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    form: {\r\n        // display: 'flex',\r\n        // flexDirection: 'column',\r\n    },\r\n    error: {\r\n        color: theme.palette.error.main,\r\n        textAlign: 'center',\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n}));\r\n\r\ninterface FormField {\r\n    value: string,\r\n    error: boolean,\r\n}\r\n\r\ninterface Form {\r\n    [index: string]: FormField,\r\n    description: FormField,\r\n    category: FormField,\r\n    amount: FormField,\r\n}\r\n\r\ninterface FormAction {\r\n    action: 'reset' | 'update' | 'validate',\r\n    name?: string,\r\n    value?: string | boolean,\r\n}\r\n\r\nconst initialValues: Form = {\r\n    description: { value: '', error: false },\r\n    category: { value: '', error: false },\r\n    amount: { value: '', error: false },\r\n};\r\n\r\nfunction fieldsReducer(previous: Form, action: FormAction): Form {\r\n    if (action.action === 'reset') {\r\n        return initialValues;\r\n    }\r\n\r\n    if (action.name !== undefined) {\r\n        if (action.action === 'update' && typeof action.value === 'string') {\r\n            return {\r\n                ...previous,\r\n                [action.name]: {\r\n                    ...previous[action.name],\r\n                    value: action.value,\r\n                },\r\n            };\r\n        }\r\n\r\n        if (action.action === 'validate' && typeof action.value === 'boolean') {\r\n            return {\r\n                ...previous,\r\n                [action.name]: {\r\n                    ...previous[action.name],\r\n                    error: action.value,\r\n                },\r\n            };\r\n        }\r\n    }\r\n\r\n    return previous;\r\n}\r\n\r\nconst MainPage: React.VFC = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const [fields, updateFields] = useReducer(fieldsReducer, initialValues);\r\n    const [promise, setPromise] = useState<Promise<unknown>>();\r\n    const [signedIn, setSignedIn] = useState(true);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    const handleFieldChange = useCallback(({ target: { name, value } }) => {\r\n        updateFields({ action: 'update', name: name, value: value });\r\n        updateFields({ action: 'validate', name: name, value: false });\r\n    }, [updateFields]);\r\n\r\n    const handleSaveClick = useCallback(() => {\r\n        let formHasErrors = false;\r\n        Object.keys(fields).forEach((fieldName: string) => {\r\n            const error = isNullOrEmpty(fields[fieldName].value);\r\n\r\n            if (error) {\r\n                formHasErrors = true;\r\n            }\r\n\r\n            updateFields({\r\n                action: 'validate',\r\n                name: fieldName,\r\n                value: error,\r\n            });\r\n        });\r\n\r\n        if (formHasErrors) {\r\n            setPromise(new Promise((resolve, reject) => {\r\n                reject();\r\n            }));\r\n        }\r\n        else {\r\n            const writePromise = writeGasto(\r\n                fields.description.value,\r\n                fields.category.value,\r\n                fields.amount.value,\r\n            );\r\n            writePromise.then(() => {\r\n                updateFields({ action: 'reset' });\r\n            }).catch(() => {\r\n                setErrorMessage('Hubo un problema guardando los datos.');\r\n            });\r\n            setPromise(writePromise);\r\n        }\r\n    }, [fields]);\r\n\r\n    useEffect(() => {\r\n        gapiLoad().then(() => {\r\n            setSignedIn(isSignedIn());\r\n        }).catch((error) => {\r\n            if (error.error === 'idpiframe_initialization_failed') {\r\n                setErrorMessage(`Tu URL no está admitida por Google. URL: ${window.location.href}`);\r\n            }\r\n            else {\r\n                setErrorMessage(JSON.stringify(error));\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const handleStatsClick = useCallback(() => {\r\n        history.push('/stats');\r\n    }, [history]);\r\n\r\n    const handleSignOutClick = useCallback(() => {\r\n        signOut().then(() => {\r\n            setSignedIn(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleSignIn = useCallback(() => {\r\n        setSignedIn(true);\r\n    }, []);\r\n\r\n    if (!signedIn) {\r\n        return (<UnloggedPage onSignedIn={handleSignIn} />);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <AppBar position=\"static\">\r\n                <Toolbar>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Nuevo gasto\r\n                    </Typography>\r\n                    <IconButton\r\n                        aria-label=\"Estadísticas\"\r\n                        color=\"inherit\"\r\n                        onClick={handleStatsClick}\r\n                    >\r\n                        <BarChartIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                        aria-label=\"Usuario\"\r\n                        color=\"inherit\"\r\n                        onClick={handleSignOutClick}\r\n                    >\r\n                        <AccountIcon />\r\n                    </IconButton>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <form className={classes.form}>\r\n                <div className={classes.input}>\r\n                    <TextField\r\n                        label=\"Descripción\"\r\n                        name=\"description\"\r\n                        fullWidth\r\n                        value={fields.description.value}\r\n                        onChange={handleFieldChange}\r\n                        error={fields.description.error}\r\n                    />\r\n                </div>\r\n                <div className={classes.input}>\r\n                    <CategorySelect\r\n                        label=\"Categoría\"\r\n                        name=\"category\"\r\n                        fullWidth\r\n                        value={fields.category.value}\r\n                        onChange={handleFieldChange}\r\n                        error={fields.category.error}\r\n                    />\r\n                </div>\r\n                <div className={classes.input}>\r\n                    <TextField\r\n                        label=\"Cantidad\"\r\n                        name=\"amount\"\r\n                        fullWidth\r\n                        value={fields.amount.value}\r\n                        onChange={handleFieldChange}\r\n                        error={fields.amount.error}\r\n                        InputProps={{\r\n                            inputComponent: NumberFormatCustom,\r\n                        }}\r\n                    />\r\n                </div>\r\n            </form>\r\n            <Typography\r\n                className={classes.error}\r\n                component=\"div\"\r\n                variant=\"body2\"\r\n            >\r\n                {errorMessage}\r\n            </Typography>\r\n            <SaveButton\r\n                onClick={handleSaveClick}\r\n                promise={promise}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MainPage;\r\n","import React, { useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst NotFoundPage: React.VFC = () => {\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            history.push('/');\r\n        }, 3000);\r\n    }, [history]);\r\n\r\n    return (\r\n        <div>\r\n            404 - Página no encontrada\r\n            Redirigiendo al inicio...\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NotFoundPage;\r\n","import React from 'react';\r\n\r\nconst StatsPage: React.VFC = () => {\r\n    return (\r\n        <div>\r\n            Acá van a aparecer gráficos lindos.\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatsPage;\r\n","import React, { FC } from 'react';\r\nimport { createMuiTheme, CssBaseline, MuiThemeProvider } from '@material-ui/core';\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport MainPage from './pages/MainPage';\r\nimport NotFoundPage from './pages/NotFoundPage';\r\nimport StatsPage from './pages/StatsPage';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        type: 'light',\r\n        // primary: { main: lightGreen[300] },\r\n        // secondary: { main: indigo.A100 },\r\n        // background: { default: blueGrey[900] },\r\n    },\r\n    typography: {\r\n        // allVariants: { color: 'white' }\r\n    },\r\n    props: {\r\n        MuiButton: {\r\n            variant: 'contained',\r\n        },\r\n        MuiFormControl: {\r\n            variant: 'outlined',\r\n        },\r\n        MuiSelect: {\r\n            variant: 'outlined',\r\n        },\r\n        MuiTextField: {\r\n            variant: 'outlined',\r\n        },\r\n    },\r\n});\r\n\r\nconst App: FC = () => {\r\n    return (\r\n        <div>\r\n            <MuiThemeProvider theme={theme}>\r\n                <CssBaseline />\r\n                <BrowserRouter basename=\"/gastos\">\r\n                    <Switch>\r\n                        <Route exact path=\"/\">\r\n                            <MainPage />\r\n                        </Route>\r\n                        <Route exact path=\"/stats\">\r\n                            <StatsPage />\r\n                        </Route>\r\n                        <Route path=\"*\">\r\n                            <NotFoundPage />\r\n                        </Route>\r\n                    </Switch>\r\n                </BrowserRouter>\r\n            </MuiThemeProvider>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n    document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}